<html><head></head><body><div hidden="" by-polymer-bundler=""><dom-module id="paper-fab" assetpath="../../bower_components/paper-fab/"><template strip-whitespace=""><style include="paper-material-styles">:host{@apply --layout-vertical;@apply --layout-center-center;background:var(--paper-fab-background, var(--accent-color));border-radius:50%;box-sizing:border-box;color:var(--text-primary-color);cursor:pointer;height:56px;min-width:0;outline:none;padding:16px;position:relative;-moz-user-select:none;-ms-user-select:none;-webkit-user-select:none;user-select:none;width:56px;z-index:0;-webkit-tap-highlight-color:rgba(0,0,0,0);-webkit-tap-highlight-color:transparent;@apply --paper-fab;}[hidden]{display:none !important;}:host([mini]){width:40px;height:40px;padding:8px;@apply --paper-fab-mini;}:host([disabled]){color:var(--paper-fab-disabled-text, var(--paper-grey-500));background:var(--paper-fab-disabled-background, var(--paper-grey-300));@apply --paper-fab-disabled;}iron-icon{@apply --paper-fab-iron-icon;}span{width:100%;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;text-align:center;@apply --paper-fab-label;}:host(.keyboard-focus){background:var(--paper-fab-keyboard-focus-background, var(--paper-pink-900));}:host([elevation="1"]){@apply --paper-material-elevation-1;}:host([elevation="2"]){@apply --paper-material-elevation-2;}:host([elevation="3"]){@apply --paper-material-elevation-3;}:host([elevation="4"]){@apply --paper-material-elevation-4;}:host([elevation="5"]){@apply --paper-material-elevation-5;}</style><iron-icon id="icon" hidden$="{{!_computeIsIconFab(icon, src)}}" src="[[src]]" icon="[[icon]]"></iron-icon><span hidden$="{{_computeIsIconFab(icon, src)}}">{{label}}</span></template><script>Polymer({is:"paper-fab",behaviors:[Polymer.PaperButtonBehavior],properties:{src:{type:String,value:""},icon:{type:String,value:""},mini:{type:Boolean,value:!1,reflectToAttribute:!0},label:{type:String,observer:"_labelChanged"}},_labelChanged:function(){this.setAttribute("aria-label",this.label)},_computeIsIconFab:function(e,t){return e.length>0||t.length>0}});</script></dom-module><dom-module id="ha-automation-picker"><template><style include="ha-style">:host{display:block;}paper-card{display:block;max-width:600px;margin:0 auto;}.content{padding:16px;}paper-item{cursor:pointer;}paper-fab{position:fixed;bottom:16px;right:16px;z-index:1;}paper-fab[is-wide]{bottom:24px;right:24px;}a{color:var(--primary-color);}</style><app-header-layout has-scrolling-region=""><app-header slot="header" fixed=""><app-toolbar><ha-menu-button narrow="[[narrow]]" show-menu="[[showMenu]]"></ha-menu-button><div main-title="">Automations Editor</div></app-toolbar></app-header><div class="content"><paper-card heading="Pick automation to edit"><div class="card-content">The automation editor allows you to create and edit automations. Please read <a href="https://home-assistant.io/docs/automation/editor/" target="_blank">the instructions</a> to make sure that you have configured Home Assistant correctly.<template is="dom-if" if="[[!automations.length]]"><p>We couldn't find any editable automations.</p></template></div><template is="dom-repeat" items="[[automations]]" as="automation"><paper-item><paper-item-body two-line="" on-tap="automationTapped"><div>[[computeName(automation)]]</div><div secondary="">[[computeDescription(automation)]]</div></paper-item-body>[[computeStatus(automation)]]</paper-item></template></paper-card><paper-fab is-wide$="[[isWide]]" icon="mdi:plus" title="Add Automation" on-tap="addAutomation"></paper-fab></div></app-header-layout></template></dom-module><script>Polymer({is:"ha-automation-picker",properties:{hass:{type:Object},narrow:{type:Boolean},showMenu:{type:Boolean,value:!1},automations:{type:Array},isWide:{type:Boolean}},automationTapped:function(t){history.pushState(null,null,"/automation/edit/"+this.automations[t.model.index].attributes.id),this.fire("location-changed")},addAutomation:function(){history.pushState(null,null,"/automation/new"),this.fire("location-changed")},computeName:function(t){return window.hassUtil.computeStateName(t)},computeDescription:function(t){return""},computeStatus:function(t){return t.state}});</script><script>var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(){"use strict";function e(){}function n(n,t){var o=U,r=void 0,i=void 0,a=void 0,l=void 0;for(l=arguments.length;l-- >2;)A.push(arguments[l]);for(t&&null!=t.children&&(A.length||A.push(t.children),delete t.children);A.length;)if((i=A.pop())&&void 0!==i.pop)for(l=i.length;l--;)A.push(i[l]);else!0!==i&&!1!==i||(i=null),(a="function"!=typeof n)&&(null==i?i="":"number"==typeof i?i=String(i):"string"!=typeof i&&(a=!1)),a&&r?o[o.length-1]+=i:o===U?o=[i]:o.push(i),r=a;var s=new e;return s.nodeName=n,s.children=o,s.attributes=null==t?void 0:t,s.key=null==t?void 0:t.key,void 0!==j.vnode&&j.vnode(s),s}function t(e,n){for(var t in n)e[t]=n[t];return e}function o(e){!e._dirty&&(e._dirty=!0)&&1==z.push(e)&&(j.debounceRendering||setTimeout)(r)}function r(){var e=void 0,n=z;for(z=[];e=n.pop();)e._dirty&&x(e)}function i(e,n,t){return"string"==typeof n||"number"==typeof n?void 0!==e.splitText:"string"==typeof n.nodeName?!e._componentConstructor&&a(e,n.nodeName):t||e._componentConstructor===n.nodeName}function a(e,n){return e.normalizedNodeName===n||e.nodeName.toLowerCase()===n.toLowerCase()}function l(e){var n=t({},e.attributes);n.children=e.children;var o=e.nodeName.defaultProps;if(void 0!==o)for(var r in o)void 0===n[r]&&(n[r]=o[r]);return n}function s(e,n){var t=n?document.createElementNS("http://www.w3.org/2000/svg",e):document.createElement(e);return t.normalizedNodeName=e,t}function p(e){e.parentNode&&e.parentNode.removeChild(e)}function u(e,n,t,o,r){if("className"===n&&(n="class"),"key"===n);else if("ref"===n)t&&t(null),o&&o(e);else if("class"!==n||r)if("style"===n){if(o&&"string"!=typeof o&&"string"!=typeof t||(e.style.cssText=o||""),o&&"object"===(void 0===o?"undefined":H(o))){if("string"!=typeof t)for(var i in t)i in o||(e.style[i]="");for(var a in o)e.style[a]="number"==typeof o[a]&&!1===W.test(a)?o[a]+"px":o[a]}}else if("dangerouslySetInnerHTML"===n)o&&(e.innerHTML=o.__html||"");else if("o"==n[0]&&"n"==n[1]){var l=n!==(n=n.replace(/Capture$/,""));n=n.toLowerCase().substring(2),o?t||e.addEventListener(n,d,l):e.removeEventListener(n,d,l),(e._listeners||(e._listeners={}))[n]=o}else if("list"!==n&&"type"!==n&&!r&&n in e)c(e,n,null==o?"":o),null!=o&&!1!==o||e.removeAttribute(n);else{var s=r&&n!==(n=n.replace(/^xlink\:?/,""));null==o||!1===o?s?e.removeAttributeNS("http://www.w3.org/1999/xlink",n.toLowerCase()):e.removeAttribute(n):"function"!=typeof o&&(s?e.setAttributeNS("http://www.w3.org/1999/xlink",n.toLowerCase(),o):e.setAttribute(n,o))}else e.className=o||""}function c(e,n,t){try{e[n]=t}catch(e){}}function d(e){return this._listeners[e.type](j.event&&j.event(e)||e)}function h(){for(var e=void 0;e=G.pop();)j.afterMount&&j.afterMount(e),e.componentDidMount&&e.componentDidMount()}function f(e,n,t,o,r,i){K++||(Q=null!=r&&void 0!==r.ownerSVGElement,X=null!=e&&!(B in e));var a=g(e,n,t,o,i);return r&&a.parentNode!==r&&r.appendChild(a),--K||(X=!1,i||h()),a}function g(e,n,t,o,r){var i=e,l=Q;if(null==n&&(n=""),"string"==typeof n)return e&&void 0!==e.splitText&&e.parentNode&&(!e._component||r)?e.nodeValue!=n&&(e.nodeValue=n):(i=document.createTextNode(n),e&&(e.parentNode&&e.parentNode.replaceChild(i,e),m(e,!0))),i[B]=!0,i;if("function"==typeof n.nodeName)return N(e,n,t,o);if(Q="svg"===n.nodeName||"foreignObject"!==n.nodeName&&Q,(!e||!a(e,String(n.nodeName)))&&(i=s(String(n.nodeName),Q),e)){for(;e.firstChild;)i.appendChild(e.firstChild);e.parentNode&&e.parentNode.replaceChild(i,e),m(e,!0)}var p=i.firstChild,u=i[B]||(i[B]={}),c=n.children;return!X&&c&&1===c.length&&"string"==typeof c[0]&&null!=p&&void 0!==p.splitText&&null==p.nextSibling?p.nodeValue!=c[0]&&(p.nodeValue=c[0]):(c&&c.length||null!=p)&&v(i,c,t,o,X||null!=u.dangerouslySetInnerHTML),b(i,n.attributes,u),Q=l,i}function v(e,n,t,o,r){var a=e.childNodes,l=[],s={},u=0,c=0,d=a.length,h=0,f=n?n.length:0,v=void 0,y=void 0,b=void 0,C=void 0;if(0!==d)for(var _=0;_<d;_++){var w=a[_],k=w[B],x=f&&k?w._component?w._component.__key:k.key:null;null!=x?(u++,s[x]=w):(k||(void 0!==w.splitText?!r||w.nodeValue.trim():r))&&(l[h++]=w)}if(0!==f)for(var N=0;N<f;N++){C=null;var O=(b=n[N]).key;if(null!=O)u&&void 0!==s[O]&&(C=s[O],s[O]=void 0,u--);else if(!C&&c<h)for(v=c;v<h;v++)if(void 0!==l[v]&&i(y=l[v],b,r)){C=y,l[v]=void 0,v===h-1&&h--,v===c&&c++;break}(C=g(C,b,t,o))&&C!==e&&(N>=d?e.appendChild(C):C!==a[N]&&(C===a[N+1]?p(a[N]):e.insertBefore(C,a[N]||null)))}if(u)for(var S in s)void 0!==s[S]&&m(s[S],!1);for(;c<=h;)void 0!==(C=l[h--])&&m(C,!1)}function m(e,n){var t=e._component;t?O(t):(null!=e[B]&&e[B].ref&&e[B].ref(null),!1!==n&&null!=e[B]||p(e),y(e))}function y(e){for(e=e.lastChild;e;){var n=e.previousSibling;m(e,!0),e=n}}function b(e,n,t){var o=void 0;for(o in t)n&&null!=n[o]||null==t[o]||u(e,o,t[o],t[o]=void 0,Q);for(o in n)"children"===o||"innerHTML"===o||o in t&&n[o]===("value"===o||"checked"===o?e[o]:t[o])||u(e,o,t[o],t[o]=n[o],Q)}function C(e){var n=e.constructor.name;(Y[n]||(Y[n]=[])).push(e)}function _(e,n,t){var o=Y[e.name],r=void 0;if(e.prototype&&e.prototype.render?(r=new e(n,t),S.call(r,n,t)):((r=new S(n,t)).constructor=e,r.render=w),o)for(var i=o.length;i--;)if(o[i].constructor===e){r.nextBase=o[i].nextBase,o.splice(i,1);break}return r}function w(e,n,t){return this.constructor(e,t)}function k(e,n,t,r,i){e._disable||(e._disable=!0,(e.__ref=n.ref)&&delete n.ref,(e.__key=n.key)&&delete n.key,!e.base||i?e.componentWillMount&&e.componentWillMount():e.componentWillReceiveProps&&e.componentWillReceiveProps(n,r),r&&r!==e.context&&(e.prevContext||(e.prevContext=e.context),e.context=r),e.prevProps||(e.prevProps=e.props),e.props=n,e._disable=!1,t!==L&&(t!==E&&!1===j.syncComponentUpdates&&e.base?o(e):x(e,E,i)),e.__ref&&e.__ref(e))}function x(e,n,o,r){if(!e._disable){var i=e.props,a=e.state,s=e.context,p=e.prevProps||i,u=e.prevState||a,c=e.prevContext||s,d=e.base,g=e.nextBase,v=d||g,y=e._component,b=!1,C=void 0,w=void 0,N=void 0;if(d&&(e.props=p,e.state=u,e.context=c,n!==M&&e.shouldComponentUpdate&&!1===e.shouldComponentUpdate(i,a,s)?b=!0:e.componentWillUpdate&&e.componentWillUpdate(i,a,s),e.props=i,e.state=a,e.context=s),e.prevProps=e.prevState=e.prevContext=e.nextBase=null,e._dirty=!1,!b){C=e.render(i,a,s),e.getChildContext&&(s=t(t({},s),e.getChildContext()));var S=C&&C.nodeName,T=void 0,D=void 0;if("function"==typeof S){var P=l(C);(w=y)&&w.constructor===S&&P.key==w.__key?k(w,P,E,s,!1):(T=w,e._component=w=_(S,P,s),w.nextBase=w.nextBase||g,w._parentComponent=e,k(w,P,L,s,!1),x(w,E,o,!0)),D=w.base}else N=v,(T=y)&&(N=e._component=null),(v||n===E)&&(N&&(N._component=null),D=f(N,C,s,o||!d,v&&v.parentNode,!0));if(v&&D!==v&&w!==y){var A=v.parentNode;A&&D!==A&&(A.replaceChild(D,v),T||(v._component=null,m(v,!1)))}if(T&&O(T),e.base=D,D&&!r){for(var U=e,V=e;V=V._parentComponent;)(U=V).base=D;D._component=U,D._componentConstructor=U.constructor}}if(!d||o?G.unshift(e):b||(h(),e.componentDidUpdate&&e.componentDidUpdate(p,u,c),j.afterUpdate&&j.afterUpdate(e)),null!=e._renderCallbacks)for(;e._renderCallbacks.length;)e._renderCallbacks.pop().call(e);K||r||h()}}function N(e,n,t,o){for(var r=e&&e._component,i=r,a=e,s=r&&e._componentConstructor===n.nodeName,p=s,u=l(n);r&&!p&&(r=r._parentComponent);)p=r.constructor===n.nodeName;return r&&p&&(!o||r._component)?(k(r,u,V,t,o),e=r.base):(i&&!s&&(O(i),e=a=null),r=_(n.nodeName,u,t),e&&!r.nextBase&&(r.nextBase=e,a=null),k(r,u,E,t,o),e=r.base,a&&e!==a&&(a._component=null,m(a,!1))),e}function O(e){j.beforeUnmount&&j.beforeUnmount(e);var n=e.base;e._disable=!0,e.componentWillUnmount&&e.componentWillUnmount(),e.base=null;var t=e._component;t?O(t):n&&(n[B]&&n[B].ref&&n[B].ref(null),e.nextBase=n,p(n),C(e),y(n)),e.__ref&&e.__ref(null)}function S(e,n){this._dirty=!0,this.context=n,this.props=e,this.state=this.state||{}}function T(e,n,t){return f(t,e,{},!1,n,!1)}function D(e){var n=F({},this.props.trigger);e.target.value?n[e.target.name]=e.target.value:delete n[e.target.name],this.props.onChange(this.props.index,n)}function P(e){return"service"in e?"Call Service":null}var j={},A=[],U=[],L=0,E=1,M=2,V=3,B="__preactattr_",W=/acit|ex(?:s|g|n|p|$)|rph|ows|mnc|ntw|ine[ch]|zoo|^ord/i,z=[],H="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return void 0===e?"undefined":_typeof(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":_typeof(e)},I=function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")},J=function(){function e(e,n){for(var t=0;t<n.length;t++){var o=n[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(n,t,o){return t&&e(n.prototype,t),o&&e(n,o),n}}(),R=function(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e},F=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},$=function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+(void 0===n?"undefined":_typeof(n)));e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)},q=function(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=(void 0===n?"undefined":_typeof(n))&&"function"!=typeof n?e:n},G=[],K=0,Q=!1,X=!1,Y={};t(S.prototype,{setState:function(e,n){var r=this.state;this.prevState||(this.prevState=t({},r)),t(r,"function"==typeof e?e(r,this.props):e),n&&(this._renderCallbacks=this._renderCallbacks||[]).push(n),o(this)},forceUpdate:function(e){e&&(this._renderCallbacks=this._renderCallbacks||[]).push(e),x(this,M)},render:function(){}});var Z=function(e){function t(e){I(this,t);var n=q(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state.isValid=!0,n.state.value=JSON.stringify(e.value||{},null,2),n.onChange=n.onChange.bind(n),n}return $(t,S),J(t,[{key:"onChange",value:function(e){var n=e.target.value,t=void 0,o=void 0;try{t=JSON.parse(n),o=!0}catch(e){o=!1}this.setState({value:n,isValid:o}),o&&this.props.onChange(t)}},{key:"componentWillReceiveProps",value:function(e){var n=e.value;this.setState({value:JSON.stringify(n,null,2),isValid:!0})}},{key:"render",value:function(e,t){var o=t.value,r={minWidth:300,width:"100%"};return t.isValid||(r.border="1px solid red"),n("iron-autogrow-textarea",{value:o,style:r,"onValue-Changed":this.onChange})}}]),t}(),ee={event:function(e){function t(){I(this,t);var e=q(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.onChange=D.bind(e),e.eventDataChanged=e.eventDataChanged.bind(e),e}return $(t,S),J(t,[{key:"eventDataChanged",value:function(e){this.props.onChange(this.props.index,F({},this.props.trigger,{event_data:e}))}},{key:"render",value:function(e){var t=e.trigger,o=t.event_type,r=t.event_data;return n("div",null,n("paper-input",{label:"Event Type",name:"event_type",value:o,onChange:this.onChange}),"Event Data",n(Z,{value:r,onChange:this.eventDataChanged}))}}]),t}(),state:function(e){function t(){I(this,t);var e=q(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.onChange=D.bind(e),e}return $(t,S),J(t,[{key:"render",value:function(e){var t=e.trigger,o=t.entity_id,r=t.to,i=t.from,a=t.for;return n("div",null,n("paper-input",{label:"Entity Id",name:"entity_id",value:o,onChange:this.onChange}),n("paper-input",{label:"From",name:"from",value:i,onChange:this.onChange}),n("paper-input",{label:"To",name:"to",value:r,onChange:this.onChange}),a&&n("pre",null,"For: ",JSON.stringify(a,null,2)))}}]),t}(),homeassistant:null,mqtt:null,numeric_state:function(e){function t(){I(this,t);var e=q(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.onChange=D.bind(e),e}return $(t,S),J(t,[{key:"render",value:function(e){var t=e.trigger,o=t.value_template,r=t.entity_id,i=t.below,a=t.above;return n("div",null,n("paper-input",{label:"Entity Id",name:"entity_id",value:r,onChange:this.onChange}),n("paper-input",{label:"Above",name:"above",value:a,onChange:this.onChange}),n("paper-input",{label:"Below",name:"below",value:i,onChange:this.onChange}),"Value template (optional)",n("br",null),n("textarea",{name:"value_template",value:o,style:{width:"100%",height:100},onChange:this.onChange}))}}]),t}(),sun:null,template:null,time:null,zone:null},ne=Object.keys(ee).sort(),te=function(e){function t(){I(this,t);var e=q(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.typeChanged=e.typeChanged.bind(e),e.onDelete=e.onDelete.bind(e),e}return $(t,S),J(t,[{key:"typeChanged",value:function(e){var n=e.target.selectedItem.innerHTML;n!==this.props.trigger.platform&&this.props.onChange(this.props.index,{platform:n})}},{key:"onDelete",value:function(){confirm("Sure you want to delete?")&&this.props.onChange(this.props.index,null)}},{key:"render",value:function(e){var t=e.index,o=e.trigger,r=e.onChange,i=ee[o.platform],a=ne.indexOf(o.platform),l=void 0;return l=i?n("div",null,n("paper-dropdown-menu-light",{label:"Trigger Type","no-animations":!0},n("paper-listbox",{slot:"dropdown-content",selected:a,"oniron-select":this.typeChanged},ne.map(function(e){return n("paper-item",null,e)}))),n(i,{index:t,trigger:o,onChange:r})):n("div",null,"Unsupported platform: ",o.platform,n("pre",null,JSON.stringify(o,null,2))),n("paper-card",null,n("div",{class:"card-menu"},n("paper-menu-button",{"no-animations":!0,"horizontal-align":"right","horizontal-offset":"-5","vertical-offset":"-5"},n("paper-icon-button",{icon:"mdi:dots-vertical",slot:"dropdown-trigger"}),n("paper-listbox",{slot:"dropdown-content"},n("paper-item",{disabled:!0},"Duplicate"),n("paper-item",{onTap:this.onDelete},"Delete")))),n("div",{class:"card-content"},l))}}]),t}(),oe=function(e){function t(){I(this,t);var e=q(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.addTrigger=e.addTrigger.bind(e),e.triggerChanged=e.triggerChanged.bind(e),e}return $(t,S),J(t,[{key:"addTrigger",value:function(){var e=this.props.trigger.concat({platform:"event"});this.props.onChange(e)}},{key:"triggerChanged",value:function(e,n){var t=this.props.trigger.concat();null===n?t.splice(e,1):t[e]=n,this.props.onChange(t)}},{key:"render",value:function(e){var t=this;return n("div",{class:"triggers"},e.trigger.map(function(e,o){return n(te,{index:o,trigger:e,onChange:t.triggerChanged})}),n("paper-card",null,n("div",{class:"card-actions add-card"},n("paper-button",{onTap:this.addTrigger},"Add trigger"))))}}]),t}(),re={"Call Service":function(e){function t(){I(this,t);var e=q(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.onChange=e.onChange.bind(e),e.serviceDataChanged=e.serviceDataChanged.bind(e),e}return $(t,S),J(t,[{key:"onChange",value:function(e){this.props.onChange(this.props.index,F({},this.props.action,R({},e.target.name,e.target.value)))}},{key:"serviceDataChanged",value:function(e){this.props.onChange(this.props.index,F({},this.props.action,{data:e}))}},{key:"render",value:function(e){var t=e.action,o=t.alias,r=t.service,i=t.data;return n("div",null,n("paper-input",{label:"Alias",name:"alias",value:o,onChange:this.onChange}),n("paper-input",{label:"Service",name:"service",value:r,onChange:this.onChange}),"Service Data",n("br",null),n(Z,{value:i,onChange:this.serviceDataChanged}))}}]),t}(),Delay:null,"Templated Delay":null,Condition:null,"Fire Event":null},ie=Object.keys(re).sort(),ae=function(e){function t(){I(this,t);var e=q(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.typeChanged=e.typeChanged.bind(e),e.onDelete=e.onDelete.bind(e),e}return $(t,S),J(t,[{key:"typeChanged",value:function(e){var n=e.target.selectedItem.innerHTML;P(this.props.action)!==n&&this.props.onChange(this.props.index,{platform:n})}},{key:"onDelete",value:function(){confirm("Sure you want to delete?")&&this.props.onChange(this.props.index,null)}},{key:"render",value:function(e){var t=e.index,o=e.action,r=e.onChange,i=P(o),a=re[i],l=ie.indexOf(i),s=void 0;return s=a?n("div",null,n("paper-dropdown-menu-light",{label:"Action Type","no-animations":!0},n("paper-listbox",{slot:"dropdown-content",selected:l,"oniron-select":this.typeChanged},ie.map(function(e){return n("paper-item",null,e)}))),n(a,{index:t,action:o,onChange:r})):n("div",null,"Unsupported action",n("pre",null,JSON.stringify(o,null,2))),n("paper-card",null,n("div",{class:"card-menu"},n("paper-menu-button",{"no-animations":!0,"horizontal-align":"right","horizontal-offset":"-5","vertical-offset":"-5"},n("paper-icon-button",{icon:"mdi:dots-vertical",slot:"dropdown-trigger"}),n("paper-listbox",{slot:"dropdown-content"},n("paper-item",{disabled:!0},"Duplicate"),n("paper-item",{onTap:this.onDelete},"Delete")))),n("div",{class:"card-content"},s))}}]),t}(),le=function(e){function t(){I(this,t);var e=q(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.addAction=e.addAction.bind(e),e.actionChanged=e.actionChanged.bind(e),e}return $(t,S),J(t,[{key:"addAction",value:function(){var e=this.props.script.concat({service:""});this.props.onChange(e)}},{key:"actionChanged",value:function(e,n){var t=this.props.script.concat();null===n?t.splice(e,1):t[e]=n,this.props.onChange(t)}},{key:"render",value:function(e){var t=this;return n("div",{class:"script"},e.script.map(function(e,o){return n(ae,{index:o,action:e,onChange:t.actionChanged})}),n("paper-card",null,n("div",{class:"card-actions add-card"},n("paper-button",{onTap:this.addAction},"Add action"))))}}]),t}(),se=function(e){function t(){I(this,t);var e=q(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.onChange=e.onChange.bind(e),e.triggerChanged=e.triggerChanged.bind(e),e.actionChanged=e.actionChanged.bind(e),e}return $(t,S),J(t,[{key:"onChange",value:function(e){this.props.onChange(F({},this.props.automation,R({},e.target.name,e.target.value)))}},{key:"triggerChanged",value:function(e){this.props.onChange(F({},this.props.automation,{trigger:e}))}},{key:"actionChanged",value:function(e){this.props.onChange(F({},this.props.automation,{action:e}))}},{key:"render",value:function(e){var t=e.automation,o=e.isWide,r=t.alias,i=t.trigger,a=t.condition,l=t.action;return n("div",null,n("ha-config-section",{"is-wide":o},n("span",{slot:"header"},r),n("span",{slot:"introduction"},"Use automations to bring your home alive."),n("paper-card",null,n("div",{class:"card-content"},n("paper-input",{label:"Name",name:"alias",value:r,onChange:this.onChange})))),n("ha-config-section",{"is-wide":o},n("span",{slot:"header"},"Triggers"),n("span",{slot:"introduction"},"Triggers are what starts the processing of an automation rule. It is possible to specify multiple triggers for the same rule. Once a trigger starts, Home Assistant will validate the conditions, if any, and call the action.",n("p",null,n("a",{href:"https://home-assistant.io/docs/automation/trigger/",target:"_blank"},"Learn more about triggers."))),n(oe,{trigger:i,onChange:this.triggerChanged})),a&&n("ha-config-section",{"is-wide":o},n("span",{slot:"header"},"Conditions"),n("span",{slot:"introduction"},"Conditions are an optional part of an automation rule and can be used to prevent an action from happening when triggered. Conditions look very similar to triggers but are very different. A trigger will look at events happening in the system while a condition only looks at how the system looks right now. A trigger can observe that a switch is being turned on. A condition can only see if a switch is currently on or off.",n("p",null,n("a",{href:"https://home-assistant.io/docs/scripts/conditions/",target:"_blank"},"Learn more about conditions."))),n("paper-card",null,n("div",{class:"card-content"},"Conditions are not supported yet.",n("pre",null,JSON.stringify(a,null,2))))),n("ha-config-section",{"is-wide":o},n("span",{slot:"header"},"Action"),n("span",{slot:"introduction"},"The actions are what Home Assistant will do when the automation is triggered.",n("p",null,n("a",{href:"https://home-assistant.io/docs/scripts/",target:"_blank"},"Learn more about actions."))),n(le,{script:l,onChange:this.actionChanged})))}}]),t}();window.AutomationEditor=function(e,t,o){return T(n(se,t),e,o)},window.unmountPreact=function(e,n){T(function(){return null},e,n)}}();</script><dom-module id="ha-automation-editor"><template><style include="ha-style">.errors{padding:20px;font-weight:bold;color:var(--google-red-500);}.content{padding-bottom:20px;}paper-card{display:block;}.triggers,
      .script{margin-top:-16px;}.triggers paper-card,
      .script paper-card{margin-top:16px;}.add-card paper-button{display:block;text-align:center;}.card-menu{position:absolute;top:0;right:0;z-index:1;color:var(--primary-text-color);}.card-menu paper-item{cursor:pointer;}span[slot=introduction] a{color:var(--primary-color);}paper-fab{position:fixed;bottom:16px;right:16px;z-index:1;margin-bottom:-80px;transition:margin-bottom .3s;}paper-fab[is-wide]{bottom:24px;right:24px;}paper-fab[dirty]{margin-bottom:0;}</style><app-header-layout has-scrolling-region=""><app-header slot="header" fixed=""><app-toolbar><paper-icon-button icon="mdi:arrow-left" on-tap="backTapped"></paper-icon-button><div main-title="">Automation [[name]]</div></app-toolbar></app-header><div class="content"><template is="dom-if" if="[[errors]]"><div class="errors">[[errors]]</div></template><div id="root"></div><paper-fab is-wide$="[[isWide]]" dirty$="[[dirty]]" icon="mdi:content-save" title="Save" on-tap="saveAutomation"></paper-fab></div></app-header-layout></template></dom-module><script>Polymer({is:"ha-automation-editor",properties:{hass:{type:Object},narrow:{type:Boolean},showMenu:{type:Boolean,value:!1},errors:{type:Object,value:null},dirty:{type:Boolean,value:!1},config:{type:Object,value:null},automation:{type:Object,observer:"automationChanged"},creatingNew:{type:Boolean,observer:"creatingNewChanged"},name:{type:String,computed:"computeName(automation)"},isWide:{type:Boolean,observer:"isWideChanged"}},created:function(){this.configChanged=this.configChanged.bind(this),this._rendered=null},detached:function(){this._rendered&&window.unmountPreact(this._rendered)},configChanged:function(t){null!==this._rendered&&(this.config=t,this.errors=null,this.dirty=!0,this._updateComponent(t))},automationChanged:function(t,i){t&&(this.hass?i&&i.attributes.id===t.attributes.id||this.hass.callApi("get","config/automation/config/"+t.attributes.id).then(function(t){["trigger","condition","action"].forEach(function(i){var e=t[i];e&&!Array.isArray(e)&&(t[i]=[e])}),this.dirty=!1,this.config=t,this._updateComponent()}.bind(this)):setTimeout(this.automationChanged.bind(this,t,i),0))},creatingNewChanged:function(t){t&&(this.dirty=!1,this.config={alias:"New Automation",trigger:[{platform:"state"}],action:[{service:""}]},this._updateComponent())},isWideChanged:function(){null!==this.config&&this._updateComponent()},backTapped:function(){this.dirty&&!confirm("You have unsaved changes. Are you sure you want to leave?")||(history.pushState(null,null,"/automation"),this.fire("location-changed"))},_updateComponent:function(){this._rendered=window.AutomationEditor(this.$.root,{automation:this.config,onChange:this.configChanged,isWide:this.isWide},this._rendered)},saveAutomation:function(){var t=this.creatingNew?""+Date.now():this.automation.attributes.id;this.hass.callApi("post","config/automation/config/"+t,this.config).then(function(){this.dirty=!1,this.creatingNew&&(history.pushState(null,null,"/automation/edit/"+t),this.fire("location-changed"))}.bind(this),function(t){throw this.errors=t.body.message,t}.bind(this))},computeName:function(t){return t&&window.hassUtil.computeStateName(t)}});</script></div><dom-module id="ha-panel-automation"><template><style>ha-automation-picker,
      ha-automation-editor{height:100%;}</style><app-route route="[[route]]" pattern="/edit/:automation" data="{{_routeData}}" active="{{_edittingAddon}}"></app-route><app-route route="[[route]]" pattern="/new" active="{{_creatingNew}}"></app-route><iron-media-query query="(min-width: 1040px)" query-matches="{{wide}}"></iron-media-query><iron-media-query query="(min-width: 1296px)" query-matches="{{wideSidebar}}"></iron-media-query><template is="dom-if" if="[[!showEditor]]"><ha-automation-picker narrow="[[narrow]]" show-menu="[[showMenu]]" automations="[[automations]]" is-wide="[[isWide]]"></ha-automation-picker></template><template is="dom-if" if="[[showEditor]]" restamp=""><ha-automation-editor hass="[[hass]]" automation="[[automation]]" is-wide="[[isWide]]" creating-new="[[_creatingNew]]"></ha-automation-editor></template></template></dom-module><script>Polymer({is:"ha-panel-automation",properties:{hass:Object,narrow:Boolean,showMenu:Boolean,route:Object,_routeData:Object,_routeMatches:Boolean,_creatingNew:Boolean,_edittingAddon:Boolean,automations:{type:Array,computed:"computeAutomations(hass)"},automation:{type:Object,computed:"computeAutomation(automations, _edittingAddon, _routeData)"},wide:Boolean,wideSidebar:Boolean,isWide:{type:Boolean,computed:"computeIsWide(showMenu, wideSidebar, wide)"},showEditor:{type:Boolean,computed:"computeShowEditor(_edittingAddon, _creatingNew)"}},computeIsWide:function(t,o,e){return t?o:e},computeAutomation:function(t,o,e){if(!t||!o)return null;for(var a=0;a<t.length;a++)if(t[a].attributes.id===e.automation)return t[a];return null},computeAutomations:function(t){var o=[];return Object.keys(t.states).forEach(function(e){var a=t.states[e];"automation"===window.hassUtil.computeDomain(a)&&"id"in a.attributes&&o.push(a)}),o.sort(function(t,o){var e=(t.attributes.alias||t.entity_id).toLowerCase(),a=(o.attributes.alias||o.entity_id).toLowerCase();return e<a?-1:e>a?1:0})},computeShowEditor:function(t,o){return o||t}});</script></body></html>