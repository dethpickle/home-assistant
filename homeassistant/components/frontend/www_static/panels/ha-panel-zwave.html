<html><head></head><body><div hidden="" by-polymer-bundler=""><dom-module id="ozw-log"><template><style include="iron-flex ha-style">.content{margin-top:24px;}paper-card{display:block;margin:0 auto;max-width:600px;}</style><paper-card heading="OZW Log"><div class="help-text"><pre>[[ozwLogs]]</pre></div><div class="card-actions"><paper-button raised="" on-tap="refreshLog">Refresh</paper-button></div></paper-card></template></dom-module><script>Polymer({is:"ozw-log",properties:{hass:{type:Object},ozwLogs:{type:String,value:""}},refreshLog:function(){this.ozwLogs="Loading ozw log...",this.hass.callApi("GET","zwave/ozwlog").then(function(o){this.ozwLogs=o}.bind(this))}});</script><dom-module id="zwave-network"><template><style include="iron-flex ha-style">.content{margin-top:24px;}paper-card{display:block;margin:0 auto;max-width:600px;}.card-actions.warning ha-call-service-button{color:var(--google-red-500);}</style><paper-card heading="Z-Wave Network Management"><iron-icon on-tap="helpTap" style="padding: 14px 0 14px 12px" icon="mdi:help-circle"></iron-icon><div style="display:inline-block" class="card-content">Z-Wave Network controls.</div><div class="card-actions"><ha-call-service-button hass="[[hass]]" domain="zwave" service="add_node_secure" show-description="[[showDescription]]">Add Node Secure</ha-call-service-button><ha-call-service-button hass="[[hass]]" domain="zwave" service="add_node" show-description="[[showDescription]]">Add Node</ha-call-service-button><ha-call-service-button hass="[[hass]]" domain="zwave" service="remove_node" show-description="[[showDescription]]">Remove Node</ha-call-service-button></div><div class="card-actions warning"><ha-call-service-button hass="[[hass]]" domain="zwave" service="cancel_command" show-description="[[showDescription]]">Cancel Command</ha-call-service-button></div><div class="card-actions"><ha-call-service-button hass="[[hass]]" domain="zwave" service="heal_network" show-description="[[showDescription]]">Heal Network</ha-call-service-button><ha-call-service-button hass="[[hass]]" domain="zwave" service="start_network" show-description="[[showDescription]]">Start Network</ha-call-service-button><ha-call-service-button hass="[[hass]]" domain="zwave" service="stop_network" show-description="[[showDescription]]">Stop Network</ha-call-service-button><ha-call-service-button hass="[[hass]]" domain="zwave" service="soft_reset" show-description="[[showDescription]]">Soft Reset</ha-call-service-button><ha-call-service-button hass="[[hass]]" domain="zwave" service="test_network" show-description="[[showDescription]]">Test Network</ha-call-service-button></div></paper-card></template></dom-module><script>Polymer({is:"zwave-network",properties:{hass:{type:Object},showDescription:{type:Boolean,value:!1}},helpTap:function(){this.showDescription=!this.showDescription}});</script><dom-module id="zwave-node-information"><template><style include="iron-flex ha-style">.content{margin-top:24px;}.node-info{margin-left:16px;}paper-card{display:block;margin:0 auto;max-width:600px;}paper-button[toggles][active]{background:lightgray;}</style><div class="content"><paper-card heading="Node Information"><div class="card-actions"><paper-button toggles="" raised="" noink="" active="{{nodeInfoActive}}">Show</paper-button></div><template is="dom-if" if="{{nodeInfoActive}}"><template is="dom-repeat" items="[[selectedNodeAttrs]]" as="state"><div class="node-info"><span>[[state]]</span></div></template></template></paper-card></div></template></dom-module><script>Polymer({is:"zwave-node-information",properties:{nodes:{type:Array,observer:"nodeChanged"},selectedNode:{type:Number,value:-1,observer:"nodeChanged"},selectedNodeAttrs:{type:Array},nodeInfoActive:{type:Boolean}},nodeChanged:function(e){if(this.nodes&&-1!==e){var t=this.nodes[this.selectedNode].attributes,o=[];Object.keys(t).forEach(function(e){o.push(e+": "+t[e])}),this.selectedNodeAttrs=o.sort()}}});</script><dom-module id="zwave-values"><template><style include="iron-flex ha-style">.content{margin-top:24px;}paper-card{display:block;margin:0 auto;max-width:600px;}.device-picker{@apply (--layout-horizontal);@apply (--layout-center-center);padding-left:24px;padding-right:24px;padding-bottom:24px;}.help-text{padding-left:24px;padding-right:24px;}</style><div class="content"><paper-card heading="Node Values"><div class="device-picker"><paper-dropdown-menu label="Value" class="flex"><paper-listbox slot="dropdown-content" selected="{{selectedValue}}"><template is="dom-repeat" items="[[values]]" as="item"><paper-item>[[computeSelectCaption(item)]]</paper-item></template></paper-listbox></paper-dropdown-menu></div><template is="dom-if" if="[[!computeIsValueSelected(selectedValue)]]"><div class="card-actions"><paper-input float-label="Value Name" type="text" value="{{newValueNameInput}}" placeholder="[[computeGetValueName(selectedValue)]]"></paper-input><ha-call-service-button hass="[[hass]]" domain="zwave" service="rename_value" service-data="[[computeValueNameServiceData(newValueNameInput)]]">Rename Value</ha-call-service-button></div></template></paper-card></div></template></dom-module><script>Polymer({is:"zwave-values",properties:{hass:{type:Object},nodes:{type:Array},values:{type:Array},selectedNode:{type:Number},selectedValue:{type:Number,value:-1}},listeners:{"hass-service-called":"serviceCalled"},serviceCalled:function(e){if(e.detail.success){var t=this;setTimeout(function(){t.refreshValues(t.selectedNode)},5e3)}},computeSelectCaption:function(e){return e.value.label+" (Instance: "+e.value.instance+", Index: "+e.value.index+")"},computeGetValueName:function(e){return this.values[e].value.label},computeIsValueSelected:function(e){return!this.nodes||-1===this.selectedNode||-1===e},refreshValues:function(e){var t=[];this.hass.callApi("GET","zwave/values/"+this.nodes[e].attributes.node_id).then(function(e){Object.keys(e).forEach(function(s){t.push({key:s,value:e[s]})}),this.values=t,this.selectedValueChanged(this.selectedValue)}.bind(this))},computeValueNameServiceData:function(e){return-1===!this.selectedNode||-1===this.selectedValue?-1:{node_id:this.nodes[this.selectedNode].attributes.node_id,value_id:this.values[this.selectedValue].key,name:e}}});</script><dom-module id="zwave-groups"><template><style include="iron-flex ha-style">.content{margin-top:24px;}paper-card{display:block;margin:0 auto;max-width:600px;}.device-picker{@apply (--layout-horizontal);@apply (--layout-center-center);padding-left:24px;padding-right:24px;padding-bottom:24px;}.help-text{padding-left:24px;padding-right:24px;}</style><div class="content"><paper-card heading="Node group associations"><div class="device-picker"><paper-dropdown-menu label="Node to control" class="flex"><paper-listbox slot="dropdown-content" selected="{{selectedTargetNode}}"><template is="dom-repeat" items="[[nodes]]" as="state"><paper-item>[[computeSelectCaption(state)]]</paper-item></template></paper-listbox></paper-dropdown-menu></div><template is="dom-if" if="[[!computeIsTargetNodeSelected(selectedTargetNode)]]"><div class="device-picker"><paper-dropdown-menu label="Group" class="flex"><paper-listbox slot="dropdown-content" selected="{{selectedGroup}}"><template is="dom-repeat" items="[[groups]]" as="state"><paper-item>[[computeSelectCaptionGroup(state)]]</paper-item></template></paper-listbox></paper-dropdown-menu></div></template><template is="dom-if" if="[[!computeIsGroupSelected(selectedGroup)]]"><div class="help-text"><span>Other Nodes in this group:</span><template is="dom-repeat" items="[[otherGroupNodes]]" as="state"><span>[[state]]</span></template></div><div class="help-text"><span>Max Associations:</span> <span>[[maxAssociations]]</span></div><div class="card-actions"><template is="dom-if" if="[[!noAssociationsLeft]]"><ha-call-service-button hass="[[hass]]" domain="zwave" service="change_association" service-data="[[computeAssocServiceData(selectedGroup, &quot;add&quot;)]]">Add To Group</ha-call-service-button></template><ha-call-service-button hass="[[hass]]" domain="zwave" service="change_association" service-data="[[computeAssocServiceData(selectedGroup, &quot;remove&quot;)]]">Remove From Group</ha-call-service-button></div></template></paper-card></div></template></dom-module><script>Polymer({is:"zwave-groups",properties:{hass:{type:Object},nodes:{type:Array},groups:{type:Array},selectedNode:{type:Number},selectedTargetNode:{type:Number,value:-1},selectedGroup:{type:Number,value:-1,observer:"selectedGroupChanged"},otherGroupNodes:{type:Array,value:-1,computed:"computeOtherGroupNodes(selectedGroup)"},maxAssociations:{type:String,value:"",computed:"computeMaxAssociations(selectedGroup)"},noAssociationsLeft:{type:Boolean,value:!0,computed:"computeAssociationsLeft(selectedGroup)"}},listeners:{"hass-service-called":"serviceCalled"},serviceCalled:function(e){if(e.detail.success){var t=this;setTimeout(function(){t.refreshGroups(t.selectedNode)},5e3)}},computeAssociationsLeft:function(e){return-1===e||this.maxAssociations===this.otherGroupNodes.length},computeMaxAssociations:function(e){if(-1===e)return-1;var t=this.groups[e].value.max_associations;return t||["None"]},computeOtherGroupNodes:function(e){if(-1===e)return-1;var t=Object.values(this.groups[e].value.associations);return t.length?t:["None"]},computeSelectCaption:function(e){return window.hassUtil.computeStateName(e)+" (Node:"+e.attributes.node_id+" "+e.attributes.query_stage+")"},computeSelectCaptionGroup:function(e){return e.key+": "+e.value.label},computeIsTargetNodeSelected:function(e){return!this.nodes||-1===e},computeIsGroupSelected:function(e){return!this.nodes||-1===this.selectedNode||-1===e},computeAssocServiceData:function(e,t){return-1===!this.groups||-1===e||-1===this.selectedNode?-1:{node_id:this.nodes[this.selectedNode].attributes.node_id,association:t,target_node_id:this.nodes[this.selectedTargetNode].attributes.node_id,group:this.groups[e].key}},refreshGroups:function(e){var t=[];this.hass.callApi("GET","zwave/groups/"+this.nodes[e].attributes.node_id).then(function(e){Object.keys(e).forEach(function(s){t.push({key:s,value:e[s]})}),this.groups=t,this.selectedGroupChanged(this.selectedGroup)}.bind(this))},selectedGroupChanged:function(e){-1!==this.selectedGroup&&-1!==e&&(this.maxAssociations=this.groups[e].value.max_associations,this.otherGroupNodes=Object.values(this.groups[e].value.associations))}});</script><dom-module id="zwave-node-config"><template><style include="iron-flex ha-style">.content{margin-top:24px;}paper-card{display:block;margin:0 auto;max-width:600px;}.device-picker{@apply (--layout-horizontal);@apply (--layout-center-center);padding-left:24px;padding-right:24px;padding-bottom:24px;}.help-text{padding-left:24px;padding-right:24px;}</style><div class="content"><paper-card heading="Node config options"><template is="dom-if" if="[[wakeupNode]]"><div class="card-actions"><paper-input float-label="Wakeup Interval" type="number" value="{{wakeupInput}}" placeholder="[[computeGetWakeupValue(selectedNode)]]"><div suffix="">seconds</div></paper-input><ha-call-service-button hass="[[hass]]" domain="zwave" service="set_wakeup" service-data="[[computeWakeupServiceData(wakeupInput)]]">Set Wakeup</ha-call-service-button></div></template><div class="device-picker"><paper-dropdown-menu label="Config parameter" class="flex"><paper-listbox slot="dropdown-content" selected="{{selectedConfigParameter}}"><template is="dom-repeat" items="[[config]]" as="state"><paper-item>[[computeSelectCaptionConfigParameter(state)]]</paper-item></template></paper-listbox></paper-dropdown-menu></div><template is="dom-if" if="[[isConfigParameterSelected(selectedConfigParameter, 'List')]]"><div class="device-picker"><paper-dropdown-menu label="Config value" class="flex" placeholder="{{loadedConfigValue}}"><paper-listbox slot="dropdown-content" selected="{{selectedConfigValue}}"><template is="dom-repeat" items="[[selectedConfigParameterValues]]" as="state"><paper-item>[[state]]</paper-item></template></paper-listbox></paper-dropdown-menu></div></template><template is="dom-if" if="[[isConfigParameterSelected(selectedConfigParameter, 'Byte Short Int')]]"><div class="card-actions"><paper-input label="{{selectedConfigParameterNumValues}}" type="number" value="{{selectedConfigValue}}" max="{{configParameterMax}}" min="{{configParameterMin}}"></paper-input></div></template><template is="dom-if" if="[[isConfigParameterSelected(selectedConfigParameter, 'Bool Button')]]"><div class="device-picker"><paper-dropdown-menu label="Config value" class="flex" placeholder="{{loadedConfigValue}}"><paper-listbox slot="dropdown-content" selected="{{selectedConfigValue}}"><template is="dom-repeat" items="[[selectedConfigParameterValues]]" as="state"><paper-item>[[state]]</paper-item></template></paper-listbox></paper-dropdown-menu></div></template><div class="help-text"><span>[[configValueHelpText]]</span></div><template is="dom-if" if="[[isConfigParameterSelected(selectedConfigParameter, 'Bool Button Byte Short Int List')]]"><div class="card-actions"><ha-call-service-button hass="[[hass]]" domain="zwave" service="set_config_parameter" service-data="[[computeSetConfigParameterServiceData(selectedConfigValue)]]">Set Config Parameter</ha-call-service-button></div></template></paper-card></div></template></dom-module><script>Polymer({is:"zwave-node-config",properties:{hass:{type:Object},nodes:{type:Array,observer:"nodesChanged"},selectedNode:{type:Number,value:-1,observer:"nodesChanged"},config:{type:Array,value:function(){return[]}},selectedConfigParameter:{type:Number,value:-1,observer:"selectedConfigParameterChanged"},configParameterMax:{type:Number,value:-1},configParameterMin:{type:Number,value:-1},configValueHelpText:{type:String,value:"",computed:"computeConfigValueHelp(selectedConfigParameter)"},selectedConfigParameterType:{type:String,value:""},selectedConfigValue:{type:Number,value:-1,observer:"computeSetConfigParameterServiceData"},selectedConfigParameterValues:{type:Array,value:function(){return[]}},selectedConfigParameterNumValues:{type:String,value:""},loadedConfigValue:{type:Number,value:-1},wakeupInput:{type:Number},wakeupNode:{type:Boolean,value:!1}},listeners:{"hass-service-called":"serviceCalled"},serviceCalled:function(e){if(e.detail.success){var t=this;setTimeout(function(){t.refreshConfig(t.selectedNode)},5e3)}},nodesChanged:function(){this.nodes&&(this.wakeupNode=0===this.nodes[this.selectedNode].attributes.wake_up_interval||this.nodes[this.selectedNode].attributes.wake_up_interval,this.wakeupNode&&(0===this.nodes[this.selectedNode].attributes.wake_up_interval?this.wakeupInput="":this.wakeupInput=this.nodes[this.selectedNode].attributes.wake_up_interval))},computeGetWakeupValue:function(e){return-1!==this.selectedNode&&this.nodes[e].attributes.wake_up_interval?this.nodes[e].attributes.wake_up_interval:"unknown"},computeWakeupServiceData:function(e){return{node_id:this.nodes[this.selectedNode].attributes.node_id,value:e}},computeConfigValueHelp:function(e){if(-1===e)return"";var t=this.config[e].value.help;return t||["No helptext available"]},computeSetConfigParameterServiceData:function(e){if(-1===this.selectedNode||-1===this.selectedConfigParameter)return-1;var t=null;return"Short Byte Int".includes(this.selectedConfigParameterType)&&(t=parseInt(e,10)),"Bool Button".includes(this.selectedConfigParameterType)&&(t=this.selectedConfigParameterValues[e]),"List"===this.selectedConfigParameterType&&(t=this.selectedConfigParameterValues[e]),{node_id:this.nodes[this.selectedNode].attributes.node_id,parameter:this.config[this.selectedConfigParameter].key,value:t}},selectedConfigParameterChanged:function(e){-1!==e&&(this.selectedConfigValue=-1,this.loadedConfigValue=-1,this.selectedConfigParameterValues=[],this.selectedConfigParameterType=this.config[e].value.type,this.configParameterMax=this.config[e].value.max,this.configParameterMin=this.config[e].value.min,this.loadedConfigValue=this.config[e].value.data,this.configValueHelpText=this.config[e].value.help,"Short Byte Int".includes(this.selectedConfigParameterType)&&(this.selectedConfigParameterNumValues=this.config[e].value.data_items,this.selectedConfigValue=this.loadedConfigValue),"Bool Button".includes(this.selectedConfigParameterType)&&(this.selectedConfigParameterValues=["True","False"],this.config[e].value.data?this.loadedConfigValue="True":this.loadedConfigValue="False"),"List".includes(this.selectedConfigParameterType)&&(this.selectedConfigParameterValues=this.config[e].value.data_items))},isConfigParameterSelected:function(e,t){return-1!==e&&(this.config[e].value.type===t||!!t.includes(this.config[e].value.type))},computeSelectCaptionConfigParameter:function(e){return e.key+": "+e.value.label},refreshConfig:function(e){var t=[];this.hass.callApi("GET","zwave/config/"+this.nodes[e].attributes.node_id).then(function(e){Object.keys(e).forEach(function(a){t.push({key:a,value:e[a]})}),this.config=t,this.selectedConfigParameterChanged(this.selectedConfigParameter)}.bind(this))}});</script><dom-module id="zwave-usercodes"><template><style include="iron-flex ha-style">.content{margin-top:24px;}paper-card{display:block;margin:0 auto;max-width:600px;}.device-picker{@apply (--layout-horizontal);@apply (--layout-center-center);padding-left:24px;padding-right:24px;padding-bottom:24px;}</style><div class="content"><paper-card heading="Node user codes"><div class="device-picker"><paper-dropdown-menu label="Code slot" class="flex"><paper-listbox slot="dropdown-content" selected="{{selectedUserCode}}"><template is="dom-repeat" items="[[userCodes]]" as="state"><paper-item>[[computeSelectCaptionUserCodes(state)]]</paper-item></template></paper-listbox></paper-dropdown-menu></div><template is="dom-if" if="[[isUserCodeSelected(selectedUserCode)]]"><div class="card-actions"><paper-input label="User code" type="number" value="{{selectedUserCodeValue}}" maxlength="{{userCodeMaxLen}}" min="0"></paper-input></div><div class="card-actions"><ha-call-service-button hass="[[hass]]" domain="lock" service="set_usercode" service-data="[[computeUserCodeServiceData(selectedUserCodeValue, &quot;Add&quot;)]]">Set Usercode</ha-call-service-button><ha-call-service-button hass="[[hass]]" domain="lock" service="clear_usercode" service-data="[[computeUserCodeServiceData(selectedUserCode, &quot;Delete&quot;)]]">Delete Usercode</ha-call-service-button></div></template></paper-card></div></template></dom-module><script>Polymer({is:"zwave-usercodes",properties:{hass:{type:Object},nodes:{type:Array},selectedNode:{type:Number},userCodes:{type:Object},userCodeMaxLen:{type:Number,value:4},selectedUserCode:{type:Number,value:-1,observer:"selectedUserCodeChanged"},selectedUserCodeValue:{type:Number,value:-1}},listeners:{"hass-service-called":"serviceCalled"},serviceCalled:function(e){if(e.detail.success){var s=this;setTimeout(function(){s.refreshUserCodes(s.selectedNode)},5e3)}},isUserCodeSelected:function(e){return-1!==e},computeSelectCaptionUserCodes:function(e){return e.key+": "+e.value.label},selectedUserCodeChanged:function(e){if(-1!==this.selectedUserCode&&-1!==e){var s=parseInt(this.userCodes[e].value.code.trim());this.userCodeMaxLen=this.userCodes[e].value.length,isNaN(s)?this.selectedUserCodeValue="":this.selectedUserCodeValue=s}},computeUserCodeServiceData:function(e,s){if(-1===this.selectedNode||!e)return-1;var t=null,d=null;return"Add"===s&&(d=e,t={node_id:this.nodes[this.selectedNode].attributes.node_id,code_slot:this.selectedUserCode,usercode:d}),"Delete"===s&&(t={node_id:this.nodes[this.selectedNode].attributes.node_id,code_slot:this.selectedUserCode}),t},refreshUserCodes:function(e){this.selectedUserCodeValue="";var s=[];this.hass.callApi("GET","zwave/usercodes/"+this.nodes[e].attributes.node_id).then(function(e){Object.keys(e).forEach(function(t){s.push({key:t,value:e[t]})}),this.userCodes=s,this.selectedUserCodeChanged(this.selectedUserCode)}.bind(this))}});</script></div><dom-module id="ha-panel-zwave"><template><style include="iron-flex ha-style">.content{margin-top:24px;}.node-info{margin-left:16px;}.help-text{padding-left:24px;padding-right:24px;}paper-card{display:block;margin:0 auto;max-width:600px;}.device-picker{@apply (--layout-horizontal);@apply (--layout-center-center);padding-left:24px;padding-right:24px;padding-bottom:24px;}</style><app-header-layout has-scrolling-region=""><app-header slot="header" fixed=""><app-toolbar><ha-menu-button narrow="[[narrow]]" show-menu="[[showMenu]]"></ha-menu-button><div main-title="">Z-Wave Manager</div></app-toolbar></app-header><div class="content"><zwave-network id="zwave-network" hass="[[hass]]"></zwave-network></div><div class="content"><paper-card heading="Z-Wave Node Management"><iron-icon on-tap="toggleHelp" style="padding: 14px 0 14px 12px" icon="mdi:help-circle"></iron-icon><div style="display:inline-block" class="card-content">Z-Wave Node controls.</div><div class="device-picker"><paper-dropdown-menu label="Nodes" class="flex"><paper-listbox slot="dropdown-content" selected="{{selectedNode}}"><template is="dom-repeat" items="[[nodes]]" as="state"><paper-item>[[computeSelectCaption(state)]]</paper-item></template></paper-listbox></paper-dropdown-menu></div><template is="dom-if" if="[[!computeIsNodeSelected(selectedNode)]]"><template is="dom-if" if="[[showHelp]]"><div style="color: grey; padding: 12px">Select node to view per-node options</div></template></template><template is="dom-if" if="[[computeIsNodeSelected(selectedNode)]]"><div class="card-actions"><ha-call-service-button hass="[[hass]]" domain="zwave" service="refresh_node" service-data="[[computeNodeServiceData(selectedNode)]]" show-description="[[showHelp]]">Refresh Node</ha-call-service-button><ha-call-service-button hass="[[hass]]" domain="zwave" service="remove_failed_node" service-data="[[computeNodeServiceData(selectedNode)]]" show-description="[[showHelp]]">Remove Failed Node</ha-call-service-button><ha-call-service-button hass="[[hass]]" domain="zwave" service="replace_failed_node" service-data="[[computeNodeServiceData(selectedNode)]]" show-description="[[showHelp]]">Replace Failed Node</ha-call-service-button><ha-call-service-button hass="[[hass]]" domain="zwave" service="print_node" service-data="[[computeNodeServiceData(selectedNode)]]" show-description="[[showHelp]]">Print Node</ha-call-service-button></div><div class="card-actions"><paper-input float-label="New node name" type="text" value="{{newNodeNameInput}}" placeholder="[[computeGetNodeName(selectedNode)]]"></paper-input><ha-call-service-button hass="[[hass]]" domain="zwave" service="rename_node" service-data="[[computeNodeNameServiceData(newNodeNameInput)]]" show-description="[[showHelp]]">Rename Node</ha-call-service-button></div><div class="device-picker"><paper-dropdown-menu label="Entities of this node" class="flex"><paper-listbox slot="dropdown-content" selected="{{selectedEntity}}"><template is="dom-repeat" items="[[entities]]" as="state"><paper-item>[[computeSelectCaptionEnt(state)]]</paper-item></template></paper-listbox></paper-dropdown-menu></div><template is="dom-if" if="[[!computeIsEntitySelected(selectedEntity)]]"><div class="card-actions"><ha-call-service-button hass="[[hass]]" domain="zwave" service="refresh_entity" service-data="[[computeRefreshEntityServiceData(selectedEntity)]]" show-description="[[showHelp]]">Refresh Entity</ha-call-service-button></div><div class="content"><div class="card-actions"><paper-button toggles="" raised="" noink="" active="{{entityInfoActive}}">Entity Attributes</paper-button></div><template is="dom-if" if="{{entityInfoActive}}"><template is="dom-repeat" items="[[selectedEntityAttrs]]" as="state"><div class="node-info"><span>[[state]]</span></div></template></template></div></template></template></paper-card></div><template is="dom-if" if="[[computeIsNodeSelected(selectedNode)]]"><zwave-node-information id="zwave-node-information" nodes="[[nodes]]" selected-node="[[selectedNode]]"></zwave-node-information></template><template is="dom-if" if="[[computeIsNodeSelected(selectedNode)]]"><zwave-values hass="[[hass]]" nodes="[[nodes]]" selected-node="[[selectedNode]]" values="[[values]]"></zwave-values></template><template is="dom-if" if="[[computeIsNodeSelected(selectedNode)]]"><zwave-groups hass="[[hass]]" nodes="[[nodes]]" selected-node="[[selectedNode]]" groups="[[groups]]"></zwave-groups></template><template is="dom-if" if="[[computeIsNodeSelected(selectedNode)]]"><zwave-node-config hass="[[hass]]" nodes="[[nodes]]" selected-node="[[selectedNode]]" config="[[config]]"></zwave-node-config></template><template is="dom-if" if="{{hasNodeUserCodes}}"><zwave-usercodes id="zwave-usercodes" hass="[[hass]]" nodes="[[nodes]]" user-codes="[[userCodes]]" selected-node="[[selectedNode]]"></zwave-usercodes></template><div class="content"><ozw-log id="ozw-log" hass="[[hass]]"></ozw-log></div></app-header-layout></template></dom-module><script>Polymer({is:"ha-panel-zwave",properties:{hass:{type:Object},narrow:{type:Boolean},showMenu:{type:Boolean,value:!1},nodes:{type:Array,computed:"computeNodes(hass)"},selectedNode:{type:Number,value:-1,observer:"selectedNodeChanged"},config:{type:Array,value:function(){return[]}},entities:{type:Array,computed:"computeEntities(selectedNode)"},entityInfoActive:{type:Boolean},selectedEntity:{type:Number,value:-1,observers:["computeIsEntitySelected","computeRefreshEntityServiceData"]},selectedEntityAttrs:{type:Array,computed:"computeSelectedEntityAttrs(selectedEntity)"},values:{type:Array},groups:{type:Array},newNodeNameInput:{type:String},userCodes:{type:Array,value:function(){return[]}},hasNodeUserCodes:{type:Boolean,value:!1},showHelp:{type:Boolean,value:!1}},computeNodes:function(e){return Object.keys(e.states).map(function(t){return e.states[t]}).filter(function(e){return!e.attributes.hidden&&e.entity_id.match("zwave[.]")}).sort(window.hassUtil.sortByName)},computeEntities:function(e){if(!this.nodes||-1===e)return-1;var t=this.hass,s=this.nodes[this.selectedNode].attributes.node_id;return Object.keys(t.states).map(function(e){return t.states[e]}).filter(function(e){return void 0!==e.attributes.node_id&&(!e.attributes.hidden&&"node_id"in e.attributes&&e.attributes.node_id===s&&!e.entity_id.match("zwave[.]"))}).sort(window.hassUtil.sortByName)},selectedNodeChanged:function(e){this.newNodeNameInput="",-1!==e&&(this.selectedConfigParameter=-1,this.selectedConfigParameterValue=-1,this.selectedGroup=-1,this.hass.callApi("GET","zwave/config/"+this.nodes[e].attributes.node_id).then(function(e){this.config=this._objToArray(e)}.bind(this)),this.hass.callApi("GET","zwave/values/"+this.nodes[e].attributes.node_id).then(function(e){this.values=this._objToArray(e)}.bind(this)),this.hass.callApi("GET","zwave/groups/"+this.nodes[e].attributes.node_id).then(function(e){this.groups=this._objToArray(e)}.bind(this)),this.hasNodeUserCodes=!1,this.notifyPath("hasNodeUserCodes"),this.hass.callApi("GET","zwave/usercodes/"+this.nodes[e].attributes.node_id).then(function(e){this.userCodes=this._objToArray(e),this.hasNodeUserCodes=this.userCodes.length>0,this.notifyPath("hasNodeUserCodes")}.bind(this)))},computeSelectedEntityAttrs:function(e){if(-1===e)return"No entity selected";var t=this.entities[e].attributes,s=[];return Object.keys(t).forEach(function(e){s.push(e+": "+t[e])}),s.sort()},computeSelectCaption:function(e){return window.hassUtil.computeStateName(e)+" (Node:"+e.attributes.node_id+" "+e.attributes.query_stage+")"},computeSelectCaptionEnt:function(e){return window.hassUtil.computeDomain(e)+"."+window.hassUtil.computeStateName(e)},computeIsNodeSelected:function(){return this.nodes&&-1!==this.selectedNode},computeIsEntitySelected:function(e){return-1===e},computeNodeServiceData:function(e){return{node_id:this.nodes[e].attributes.node_id}},computeGetNodeName:function(e){return-1!==this.selectedNode&&this.nodes[e].entity_id?this.nodes[e].attributes.node_name:-1},computeNodeNameServiceData:function(e){return{node_id:this.nodes[this.selectedNode].attributes.node_id,name:e}},computeRefreshEntityServiceData:function(e){return-1===e?-1:{entity_id:this.entities[e].entity_id}},toggleHelp:function(){this.showHelp=!this.showHelp},_objToArray:function(e){var t=[];return Object.keys(e).forEach(function(s){t.push({key:s,value:e[s]})}),t}});</script></body></html>