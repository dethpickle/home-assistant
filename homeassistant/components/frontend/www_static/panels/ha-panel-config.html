<html><head></head><body><div hidden="" by-polymer-bundler=""><dom-module id="ha-config-section"><template><style include="iron-flex ha-style">.content{padding:28px 20px 0;max-width:1040px;margin:0 auto;}.header{@apply (--paper-font-display1);opacity:var(--dark-primary-opacity);}.together{margin-top:32px;}.intro{@apply (--paper-font-subhead);width:100%;max-width:400px;margin-right:40px;opacity:var(--dark-primary-opacity);}.panel{margin-top:-24px;}.panel ::slotted(*){margin-top:24px;display:block;}.narrow.content{max-width:640px;}.narrow .together{margin-top:20px;}.narrow .header{@apply (--paper-font-headline);}.narrow .intro{font-size:14px;padding-bottom:20px;margin-right:0;max-width:500px;}</style><div class$="[[computeContentClasses(isWide)]]"><div class="header"><slot name="header"></slot></div><div class$="[[computeClasses(isWide)]]"><div class="intro"><slot name="introduction"></slot></div><div class="flex panel"><slot></slot></div></div></div></template></dom-module><script>Polymer({is:"ha-config-section",properties:{hass:{type:Object},narrow:{type:Boolean},showMenu:{type:Boolean,value:!1},isWide:{type:Boolean,value:!1}},computeContentClasses:function(e){return e?"content ":"content narrow"},computeClasses:function(e){return"together layout "+(e?"horizontal":"vertical narrow")}});</script><dom-module id="ha-config-navigation" assetpath="dashboard/"><template><style include="iron-flex ha-style">paper-item{cursor:pointer;}</style><ha-config-section is-wide="[[isWide]]"><span slot="header">Configure Home Assistant</span> <span slot="introduction">Here it is possible to configure your components and Home Assistant. Not everything is possible to configure from the UI yet, but we're working on it.</span><paper-card><template is="dom-repeat" items="[[pages]]"><template is="dom-if" if="[[_computeLoaded(hass, item)]]"><paper-item on-tap="_navigate"><paper-item-body two-line="">[[_computeCaption(item)]]<div secondary="">[[_computeDescription(item)]]</div></paper-item-body><iron-icon icon="mdi:chevron-right"></iron-icon></paper-item></template></template></paper-card></ha-config-section></template></dom-module><script>Polymer({is:"ha-config-navigation",properties:{hass:{type:Object},isWide:{type:Boolean,value:!1},pages:{type:Array,value:[{domain:"automation",caption:"Automation",description:"Create and edit automations."},{domain:"core",caption:"Configuration.yaml",description:"Manage your configuration file and the server.",loaded:!0},{domain:"zwave",caption:"Z-Wave",description:"Manage your Z-Wave network."}]}},_computeLoaded:function(o,n){return n.loaded||window.hassUtil.isComponentLoaded(o,n.domain)},_computeCaption:function(o){return o.caption},_computeDescription:function(o){return o.description},_navigate:function(o){history.pushState(null,null,"/config/"+o.model.item.domain),this.fire("location-changed")}});</script><dom-module id="ha-config-dashboard" assetpath="dashboard/"><template><style include="iron-flex ha-style">.content{padding-bottom:32px;}.border{margin:32px auto 0;border-bottom:1px solid rgba(0, 0, 0, 0.12);max-width:1040px;}.narrow .border{max-width:640px;}</style><app-header-layout has-scrolling-region=""><app-header slot="header" fixed=""><app-toolbar><ha-menu-button narrow="[[narrow]]" show-menu="[[showMenu]]"></ha-menu-button><div main-title="">Configuration</div></app-toolbar></app-header><div class$="[[computeClasses(isWide)]]"><ha-config-navigation is-wide="[[isWide]]" hass="[[hass]]"></ha-config-navigation></div></app-header-layout></template></dom-module><script>Polymer({is:"ha-config-dashboard",properties:{hass:Object,isWide:Boolean},computeClasses:function(e){return e?"content":"content narrow"},computeIsThemesLoaded:function(e){return e.themes&&e.themes.themes&&Object.keys(e.themes.themes).length}});</script><dom-module id="ha-config-section-core" assetpath="core/"><template><style include="iron-flex ha-style">.validate-container{@apply (--layout-vertical);@apply (--layout-center-center);height:140px;}.validate-result{color:var(--google-green-500);font-weight:500;margin-bottom:1em;}.config-invalid{margin:1em 0;}.config-invalid .text{color:var(--google-red-500);font-weight:500;}.config-invalid paper-button{float:right;}.validate-log{white-space:pre-wrap;}</style><ha-config-section is-wide="[[isWide]]"><span slot="header">Server Management</span> <span slot="introduction">Changing your configuration can be a tiresome process. We know. This section will try to make your life a little bit easier.</span><paper-card heading="Configuration Validation"><div class="card-content">Validate your configuration if you recently made some changes to your configuration and want to make sure that it is all valid.<template is="dom-if" if="[[!validateLog]]"><div class="validate-container"><template is="dom-if" if="[[!validating]]"><div class="validate-result" id="result">[[validateResult]]</div><paper-button raised="" on-tap="validateConfig">check config</paper-button></template><template is="dom-if" if="[[validating]]"><paper-spinner active=""></paper-spinner></template></div></template><template is="dom-if" if="[[validateLog]]"><div class="config-invalid"><span class="text">Configuration invalid.</span><paper-button raised="" on-tap="validateConfig">check config</paper-button></div><div id="configLog" class="validate-log">[[validateLog]]</div></template></div></paper-card><paper-card heading="Configuration Reloading"><div class="card-content">Some parts of Home Assistant can reload without requiring a restart. Hitting reload will unload their current configuration and load the new one.</div><div class="card-actions"><ha-call-service-button hass="[[hass]]" domain="homeassistant" service="reload_core_config">Reload Core</ha-call-service-button><ha-call-service-button hass="[[hass]]" domain="group" service="reload" hidden$="[[!groupLoaded(hass)]]">Reload Groups</ha-call-service-button><ha-call-service-button hass="[[hass]]" domain="automation" service="reload" hidden$="[[!automationLoaded(hass)]]">Reload Automation</ha-call-service-button><ha-call-service-button hass="[[hass]]" domain="script" service="reload" hidden$="[[!scriptLoaded(hass)]]">Reload Scripts</ha-call-service-button></div></paper-card><paper-card heading="Server Management"><div class="card-content">Control your Home Assistant serverâ€¦ from Home Assistant.</div><div class="card-actions warning"><ha-call-service-button class="warning" hass="[[hass]]" domain="homeassistant" service="restart">Restart</ha-call-service-button><ha-call-service-button class="warning" hass="[[hass]]" domain="homeassistant" service="stop">Stop</ha-call-service-button></div></paper-card></ha-config-section></template></dom-module><script>Polymer({is:"ha-config-section-core",properties:{hass:{type:Object},isWide:{type:Boolean,value:!1},validating:{type:Boolean,value:!1},validateResult:{type:String,value:""},validateLog:{type:String,value:""}},groupLoaded:function(i){return window.hassUtil.isComponentLoaded(i,"group")},automationLoaded:function(i){return window.hassUtil.isComponentLoaded(i,"automation")},scriptLoaded:function(i){return window.hassUtil.isComponentLoaded(i,"script")},validateConfig:function(){this.validating=!0,this.validateLog="",this.validateResult="";var i=this;this.hass.callApi("POST","config/core/check_config").then(function(t){i.validating=!1,(i.configValid="valid"===t.result)?i.validateResult="Valid!":i.validateLog=t.errors})}});</script><dom-module id="ha-config-section-hassbian" assetpath="core/"><template><style include="iron-flex ha-style">.header{font-size:16px;margin-bottom:1em;}.header .status{font-size:14px;float:right;}.card-actions paper-button{color:var(--default-primary-color);font-weight:500;}</style><ha-config-section is-wide="[[isWide]]"><span slot="header">Bring Hassbian to the next level</span> <span slot="introduction">Discover exciting add-ons to enhance your Home Assistant installation. Add an MQTT server or control a connected TV via HDMI-CEC.</span><template is="dom-if" if="[[suiteStatus]]"><template is="dom-repeat" items="[[computeSuiteKeys(suiteStatus)]]" as="suiteKey"><paper-card><div class="card-content"><div class="header">[[computeTitle(suiteKey)]] <span class="status">[[computeSuiteStatus(suiteStatus, suiteKey)]]</span></div>[[computeSuiteDescription(suiteStatus, suiteKey)]]</div><div class="card-actions"><paper-button on-tap="suiteMoreInfoTapped">LEARN MORE</paper-button><template is="dom-if" if="[[computeShowInstall(suiteStatus, suiteKey)]]"><paper-button on-tap="suiteActionTapped">INSTALL</paper-button></template></div></paper-card></template></template></ha-config-section></template></dom-module><script>Polymer({is:"ha-config-section-hassbian",properties:{hass:{type:Object},isWide:{type:Boolean},suiteStatus:{type:Object,value:null}},updateStatus:function(){this.hass.callApi("GET","config/hassbian/suites").then(function(t){this.suiteStatus=t;for(var e=!1,s=Object.keys(t),i=0;i<s.length;i++)if("installing"===t[s[i]].state){e=!0;break}e&&this.async(this.updateStatus,5e3)}.bind(this))},attached:function(){this.updateStatus=this.updateStatus.bind(this),this.updateStatus()},computeSuiteKeys:function(t){return Object.keys(t).sort(function(e,s){var i="installing"===t[e].state,n="installing"===t[s].state;if(i&&n);else{if(i)return-1;if(n)return 1}return e<s?-1:e>s?1:0})},computeSuiteDescription:function(t,e){return t[e].description},computeTitle:function(t){return t.substr(0,1).toUpperCase()+t.substr(1)},computeSuiteStatus:function(t,e){var s=t[e].state.replace(/_/," ");return s.substr(0,1).toUpperCase()+s.substr(1)},computeShowStatus:function(t,e){var s=t[e].state;return"installing"!==s&&"not_installed"!==s},computeShowInstall:function(t,e){return"not_installed"===t[e].state},suiteMoreInfoTapped:function(){},suiteActionTapped:function(){this.hass.callApi("POST","config/hassbian/suites/openzwave/install").then(this.updateStatus)}});</script><dom-module id="ha-config-section-themes" assetpath="core/"><template><ha-config-section is-wide="[[isWide]]"><span slot="header">Set a theme</span> <span slot="introduction">Choose 'default' to use whatever theme the backend chooses or pick a theme for this device.</span><paper-card><div class="card-content"><paper-dropdown-menu label="Theme" vertical-align="bottom"><paper-listbox slot="dropdown-content" selected="{{selectedTheme}}"><template is="dom-repeat" items="[[themes]]" as="theme"><paper-item>[[theme]]</paper-item></template></paper-listbox></paper-dropdown-menu></div></paper-card></ha-config-section></template></dom-module><script>Polymer({is:"ha-config-section-themes",properties:{hass:{type:Object},isWide:{type:Boolean},themes:{type:Array,computed:"computeThemes(hass)"},selectedTheme:{type:Number}},ready:function(){this.hass.selectedTheme&&this.themes.indexOf(this.hass.selectedTheme)>0?this.selectedTheme=this.themes.indexOf(this.hass.selectedTheme):this.hass.selectedTheme||(this.selectedTheme=0)},observers:["selectionChanged(hass, selectedTheme)"],computeThemes:function(e){return e?["Backend-selected","default"].concat(Object.keys(e.themes.themes).sort()):[]},selectionChanged:function(e,s){s>0&&s<this.themes.length?e.selectedTheme!==this.themes[s]&&this.fire("settheme",this.themes[s]):0===s&&""!==e.selectedTheme&&this.fire("settheme","")}});</script><dom-module id="ha-config-core" assetpath="core/"><template><style include="iron-flex ha-style">.content{padding-bottom:32px;}.border{margin:32px auto 0;border-bottom:1px solid rgba(0, 0, 0, 0.12);max-width:1040px;}.narrow .border{max-width:640px;}</style><app-header-layout has-scrolling-region=""><app-header slot="header" fixed=""><app-toolbar><paper-icon-button icon="mdi:arrow-left" on-tap="_backTapped"></paper-icon-button><div main-title="">Core</div></app-toolbar></app-header><div class$="[[computeClasses(isWide)]]"><ha-config-section-core is-wide="[[isWide]]" hass="[[hass]]"></ha-config-section-core><template is="dom-if" if="[[computeIsThemesLoaded(hass)]]"><div class="border"></div><ha-config-section-themes is-wide="[[isWide]]" hass="[[hass]]"></ha-config-section-themes></template><template is="dom-if" if="[[computeIsHassbianLoaded(hass)]]"><div class="border"></div><ha-config-section-hassbian is-wide="[[isWide]]" hass="[[hass]]"></ha-config-section-hassbian></template></div></app-header-layout></template></dom-module><script>Polymer({is:"ha-config-core",properties:{hass:Object,isWide:Boolean},computeClasses:function(e){return e?"content":"content narrow"},computeIsHassbianLoaded:function(e){return window.hassUtil.isComponentLoaded(e,"config.hassbian")},computeIsZwaveLoaded:function(e){return window.hassUtil.isComponentLoaded(e,"config.zwave")},computeIsThemesLoaded:function(e){return e.themes&&e.themes.themes&&Object.keys(e.themes.themes).length},_backTapped:function(){history.back()}});</script><dom-module id="paper-fab" assetpath="../../bower_components/paper-fab/"><template strip-whitespace=""><style include="paper-material-styles">:host{@apply --layout-vertical;@apply --layout-center-center;background:var(--paper-fab-background, var(--accent-color));border-radius:50%;box-sizing:border-box;color:var(--text-primary-color);cursor:pointer;height:56px;min-width:0;outline:none;padding:16px;position:relative;-moz-user-select:none;-ms-user-select:none;-webkit-user-select:none;user-select:none;width:56px;z-index:0;-webkit-tap-highlight-color:rgba(0,0,0,0);-webkit-tap-highlight-color:transparent;@apply --paper-fab;}[hidden]{display:none !important;}:host([mini]){width:40px;height:40px;padding:8px;@apply --paper-fab-mini;}:host([disabled]){color:var(--paper-fab-disabled-text, var(--paper-grey-500));background:var(--paper-fab-disabled-background, var(--paper-grey-300));@apply --paper-fab-disabled;}iron-icon{@apply --paper-fab-iron-icon;}span{width:100%;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;text-align:center;@apply --paper-fab-label;}:host(.keyboard-focus){background:var(--paper-fab-keyboard-focus-background, var(--paper-pink-900));}:host([elevation="1"]){@apply --paper-material-elevation-1;}:host([elevation="2"]){@apply --paper-material-elevation-2;}:host([elevation="3"]){@apply --paper-material-elevation-3;}:host([elevation="4"]){@apply --paper-material-elevation-4;}:host([elevation="5"]){@apply --paper-material-elevation-5;}</style><iron-icon id="icon" hidden$="{{!_computeIsIconFab(icon, src)}}" src="[[src]]" icon="[[icon]]"></iron-icon><span hidden$="{{_computeIsIconFab(icon, src)}}">{{label}}</span></template><script>Polymer({is:"paper-fab",behaviors:[Polymer.PaperButtonBehavior],properties:{src:{type:String,value:""},icon:{type:String,value:""},mini:{type:Boolean,value:!1,reflectToAttribute:!0},label:{type:String,observer:"_labelChanged"}},_labelChanged:function(){this.setAttribute("aria-label",this.label)},_computeIsIconFab:function(e,t){return e.length>0||t.length>0}});</script></dom-module><dom-module id="ha-automation-picker" assetpath="automation/"><template><style include="ha-style">:host{display:block;}paper-item{cursor:pointer;}paper-fab{position:fixed;bottom:16px;right:16px;z-index:1;}paper-fab[is-wide]{bottom:24px;right:24px;}a{color:var(--primary-color);}</style><app-header-layout has-scrolling-region=""><app-header slot="header" fixed=""><app-toolbar><paper-icon-button icon="mdi:arrow-left" on-tap="_backTapped"></paper-icon-button><div main-title="">Automations</div></app-toolbar></app-header><ha-config-section is-wide="[[isWide]]"><div slot="header">Automation editor</div><div slot="introduction">The automation editor allows you to create and edit automations. Please read <a href="https://home-assistant.io/docs/automation/editor/" target="_blank">the instructions</a> to make sure that you have configured Home Assistant correctly.</div><paper-card heading="Pick automation to edit"><template is="dom-if" if="[[!automations.length]]"><div class="card-content"><p>We couldn't find any editable automations.</p></div></template><template is="dom-repeat" items="[[automations]]" as="automation"><paper-item><paper-item-body two-line="" on-tap="automationTapped"><div>[[computeName(automation)]]</div><div secondary="">[[computeDescription(automation)]]</div></paper-item-body><iron-icon icon="mdi:chevron-right"></iron-icon></paper-item></template></paper-card></ha-config-section><paper-fab is-wide$="[[isWide]]" icon="mdi:plus" title="Add Automation" on-tap="addAutomation"></paper-fab></app-header-layout></template></dom-module><script>Polymer({is:"ha-automation-picker",properties:{hass:{type:Object},narrow:{type:Boolean},showMenu:{type:Boolean,value:!1},automations:{type:Array},isWide:{type:Boolean}},automationTapped:function(t){history.pushState(null,null,"/config/automation/edit/"+this.automations[t.model.index].attributes.id),this.fire("location-changed")},addAutomation:function(){history.pushState(null,null,"/config/automation/new"),this.fire("location-changed")},computeName:function(t){return window.hassUtil.computeStateName(t)},computeDescription:function(t){return""},_backTapped:function(){history.back()}});</script><script>var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(){"use strict";function e(){}function n(n,t){var o=U,r=void 0,i=void 0,a=void 0,l=void 0;for(l=arguments.length;l-- >2;)A.push(arguments[l]);for(t&&null!=t.children&&(A.length||A.push(t.children),delete t.children);A.length;)if((i=A.pop())&&void 0!==i.pop)for(l=i.length;l--;)A.push(i[l]);else!0!==i&&!1!==i||(i=null),(a="function"!=typeof n)&&(null==i?i="":"number"==typeof i?i=String(i):"string"!=typeof i&&(a=!1)),a&&r?o[o.length-1]+=i:o===U?o=[i]:o.push(i),r=a;var s=new e;return s.nodeName=n,s.children=o,s.attributes=null==t?void 0:t,s.key=null==t?void 0:t.key,void 0!==j.vnode&&j.vnode(s),s}function t(e,n){for(var t in n)e[t]=n[t];return e}function o(e){!e._dirty&&(e._dirty=!0)&&1==z.push(e)&&(j.debounceRendering||setTimeout)(r)}function r(){var e=void 0,n=z;for(z=[];e=n.pop();)e._dirty&&x(e)}function i(e,n,t){return"string"==typeof n||"number"==typeof n?void 0!==e.splitText:"string"==typeof n.nodeName?!e._componentConstructor&&a(e,n.nodeName):t||e._componentConstructor===n.nodeName}function a(e,n){return e.normalizedNodeName===n||e.nodeName.toLowerCase()===n.toLowerCase()}function l(e){var n=t({},e.attributes);n.children=e.children;var o=e.nodeName.defaultProps;if(void 0!==o)for(var r in o)void 0===n[r]&&(n[r]=o[r]);return n}function s(e,n){var t=n?document.createElementNS("http://www.w3.org/2000/svg",e):document.createElement(e);return t.normalizedNodeName=e,t}function p(e){e.parentNode&&e.parentNode.removeChild(e)}function u(e,n,t,o,r){if("className"===n&&(n="class"),"key"===n);else if("ref"===n)t&&t(null),o&&o(e);else if("class"!==n||r)if("style"===n){if(o&&"string"!=typeof o&&"string"!=typeof t||(e.style.cssText=o||""),o&&"object"===(void 0===o?"undefined":H(o))){if("string"!=typeof t)for(var i in t)i in o||(e.style[i]="");for(var a in o)e.style[a]="number"==typeof o[a]&&!1===W.test(a)?o[a]+"px":o[a]}}else if("dangerouslySetInnerHTML"===n)o&&(e.innerHTML=o.__html||"");else if("o"==n[0]&&"n"==n[1]){var l=n!==(n=n.replace(/Capture$/,""));n=n.toLowerCase().substring(2),o?t||e.addEventListener(n,d,l):e.removeEventListener(n,d,l),(e._listeners||(e._listeners={}))[n]=o}else if("list"!==n&&"type"!==n&&!r&&n in e)c(e,n,null==o?"":o),null!=o&&!1!==o||e.removeAttribute(n);else{var s=r&&n!==(n=n.replace(/^xlink\:?/,""));null==o||!1===o?s?e.removeAttributeNS("http://www.w3.org/1999/xlink",n.toLowerCase()):e.removeAttribute(n):"function"!=typeof o&&(s?e.setAttributeNS("http://www.w3.org/1999/xlink",n.toLowerCase(),o):e.setAttribute(n,o))}else e.className=o||""}function c(e,n,t){try{e[n]=t}catch(e){}}function d(e){return this._listeners[e.type](j.event&&j.event(e)||e)}function h(){for(var e=void 0;e=G.pop();)j.afterMount&&j.afterMount(e),e.componentDidMount&&e.componentDidMount()}function f(e,n,t,o,r,i){K++||(Q=null!=r&&void 0!==r.ownerSVGElement,X=null!=e&&!(B in e));var a=g(e,n,t,o,i);return r&&a.parentNode!==r&&r.appendChild(a),--K||(X=!1,i||h()),a}function g(e,n,t,o,r){var i=e,l=Q;if(null==n&&(n=""),"string"==typeof n)return e&&void 0!==e.splitText&&e.parentNode&&(!e._component||r)?e.nodeValue!=n&&(e.nodeValue=n):(i=document.createTextNode(n),e&&(e.parentNode&&e.parentNode.replaceChild(i,e),m(e,!0))),i[B]=!0,i;if("function"==typeof n.nodeName)return N(e,n,t,o);if(Q="svg"===n.nodeName||"foreignObject"!==n.nodeName&&Q,(!e||!a(e,String(n.nodeName)))&&(i=s(String(n.nodeName),Q),e)){for(;e.firstChild;)i.appendChild(e.firstChild);e.parentNode&&e.parentNode.replaceChild(i,e),m(e,!0)}var p=i.firstChild,u=i[B]||(i[B]={}),c=n.children;return!X&&c&&1===c.length&&"string"==typeof c[0]&&null!=p&&void 0!==p.splitText&&null==p.nextSibling?p.nodeValue!=c[0]&&(p.nodeValue=c[0]):(c&&c.length||null!=p)&&v(i,c,t,o,X||null!=u.dangerouslySetInnerHTML),b(i,n.attributes,u),Q=l,i}function v(e,n,t,o,r){var a=e.childNodes,l=[],s={},u=0,c=0,d=a.length,h=0,f=n?n.length:0,v=void 0,y=void 0,b=void 0,C=void 0;if(0!==d)for(var _=0;_<d;_++){var w=a[_],k=w[B],x=f&&k?w._component?w._component.__key:k.key:null;null!=x?(u++,s[x]=w):(k||(void 0!==w.splitText?!r||w.nodeValue.trim():r))&&(l[h++]=w)}if(0!==f)for(var N=0;N<f;N++){C=null;var O=(b=n[N]).key;if(null!=O)u&&void 0!==s[O]&&(C=s[O],s[O]=void 0,u--);else if(!C&&c<h)for(v=c;v<h;v++)if(void 0!==l[v]&&i(y=l[v],b,r)){C=y,l[v]=void 0,v===h-1&&h--,v===c&&c++;break}(C=g(C,b,t,o))&&C!==e&&(N>=d?e.appendChild(C):C!==a[N]&&(C===a[N+1]?p(a[N]):e.insertBefore(C,a[N]||null)))}if(u)for(var S in s)void 0!==s[S]&&m(s[S],!1);for(;c<=h;)void 0!==(C=l[h--])&&m(C,!1)}function m(e,n){var t=e._component;t?O(t):(null!=e[B]&&e[B].ref&&e[B].ref(null),!1!==n&&null!=e[B]||p(e),y(e))}function y(e){for(e=e.lastChild;e;){var n=e.previousSibling;m(e,!0),e=n}}function b(e,n,t){var o=void 0;for(o in t)n&&null!=n[o]||null==t[o]||u(e,o,t[o],t[o]=void 0,Q);for(o in n)"children"===o||"innerHTML"===o||o in t&&n[o]===("value"===o||"checked"===o?e[o]:t[o])||u(e,o,t[o],t[o]=n[o],Q)}function C(e){var n=e.constructor.name;(Y[n]||(Y[n]=[])).push(e)}function _(e,n,t){var o=Y[e.name],r=void 0;if(e.prototype&&e.prototype.render?(r=new e(n,t),S.call(r,n,t)):((r=new S(n,t)).constructor=e,r.render=w),o)for(var i=o.length;i--;)if(o[i].constructor===e){r.nextBase=o[i].nextBase,o.splice(i,1);break}return r}function w(e,n,t){return this.constructor(e,t)}function k(e,n,t,r,i){e._disable||(e._disable=!0,(e.__ref=n.ref)&&delete n.ref,(e.__key=n.key)&&delete n.key,!e.base||i?e.componentWillMount&&e.componentWillMount():e.componentWillReceiveProps&&e.componentWillReceiveProps(n,r),r&&r!==e.context&&(e.prevContext||(e.prevContext=e.context),e.context=r),e.prevProps||(e.prevProps=e.props),e.props=n,e._disable=!1,t!==L&&(t!==E&&!1===j.syncComponentUpdates&&e.base?o(e):x(e,E,i)),e.__ref&&e.__ref(e))}function x(e,n,o,r){if(!e._disable){var i=e.props,a=e.state,s=e.context,p=e.prevProps||i,u=e.prevState||a,c=e.prevContext||s,d=e.base,g=e.nextBase,v=d||g,y=e._component,b=!1,C=void 0,w=void 0,N=void 0;if(d&&(e.props=p,e.state=u,e.context=c,n!==M&&e.shouldComponentUpdate&&!1===e.shouldComponentUpdate(i,a,s)?b=!0:e.componentWillUpdate&&e.componentWillUpdate(i,a,s),e.props=i,e.state=a,e.context=s),e.prevProps=e.prevState=e.prevContext=e.nextBase=null,e._dirty=!1,!b){C=e.render(i,a,s),e.getChildContext&&(s=t(t({},s),e.getChildContext()));var S=C&&C.nodeName,T=void 0,D=void 0;if("function"==typeof S){var P=l(C);(w=y)&&w.constructor===S&&P.key==w.__key?k(w,P,E,s,!1):(T=w,e._component=w=_(S,P,s),w.nextBase=w.nextBase||g,w._parentComponent=e,k(w,P,L,s,!1),x(w,E,o,!0)),D=w.base}else N=v,(T=y)&&(N=e._component=null),(v||n===E)&&(N&&(N._component=null),D=f(N,C,s,o||!d,v&&v.parentNode,!0));if(v&&D!==v&&w!==y){var A=v.parentNode;A&&D!==A&&(A.replaceChild(D,v),T||(v._component=null,m(v,!1)))}if(T&&O(T),e.base=D,D&&!r){for(var U=e,V=e;V=V._parentComponent;)(U=V).base=D;D._component=U,D._componentConstructor=U.constructor}}if(!d||o?G.unshift(e):b||(h(),e.componentDidUpdate&&e.componentDidUpdate(p,u,c),j.afterUpdate&&j.afterUpdate(e)),null!=e._renderCallbacks)for(;e._renderCallbacks.length;)e._renderCallbacks.pop().call(e);K||r||h()}}function N(e,n,t,o){for(var r=e&&e._component,i=r,a=e,s=r&&e._componentConstructor===n.nodeName,p=s,u=l(n);r&&!p&&(r=r._parentComponent);)p=r.constructor===n.nodeName;return r&&p&&(!o||r._component)?(k(r,u,V,t,o),e=r.base):(i&&!s&&(O(i),e=a=null),r=_(n.nodeName,u,t),e&&!r.nextBase&&(r.nextBase=e,a=null),k(r,u,E,t,o),e=r.base,a&&e!==a&&(a._component=null,m(a,!1))),e}function O(e){j.beforeUnmount&&j.beforeUnmount(e);var n=e.base;e._disable=!0,e.componentWillUnmount&&e.componentWillUnmount(),e.base=null;var t=e._component;t?O(t):n&&(n[B]&&n[B].ref&&n[B].ref(null),e.nextBase=n,p(n),C(e),y(n)),e.__ref&&e.__ref(null)}function S(e,n){this._dirty=!0,this.context=n,this.props=e,this.state=this.state||{}}function T(e,n,t){return f(t,e,{},!1,n,!1)}function D(e){var n=F({},this.props.trigger);e.target.value?n[e.target.name]=e.target.value:delete n[e.target.name],this.props.onChange(this.props.index,n)}function P(e){return"service"in e?"Call Service":null}var j={},A=[],U=[],L=0,E=1,M=2,V=3,B="__preactattr_",W=/acit|ex(?:s|g|n|p|$)|rph|ows|mnc|ntw|ine[ch]|zoo|^ord/i,z=[],H="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return void 0===e?"undefined":_typeof(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":_typeof(e)},I=function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")},J=function(){function e(e,n){for(var t=0;t<n.length;t++){var o=n[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(n,t,o){return t&&e(n.prototype,t),o&&e(n,o),n}}(),R=function(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e},F=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},$=function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+(void 0===n?"undefined":_typeof(n)));e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)},q=function(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=(void 0===n?"undefined":_typeof(n))&&"function"!=typeof n?e:n},G=[],K=0,Q=!1,X=!1,Y={};t(S.prototype,{setState:function(e,n){var r=this.state;this.prevState||(this.prevState=t({},r)),t(r,"function"==typeof e?e(r,this.props):e),n&&(this._renderCallbacks=this._renderCallbacks||[]).push(n),o(this)},forceUpdate:function(e){e&&(this._renderCallbacks=this._renderCallbacks||[]).push(e),x(this,M)},render:function(){}});var Z=function(e){function t(e){I(this,t);var n=q(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state.isValid=!0,n.state.value=JSON.stringify(e.value||{},null,2),n.onChange=n.onChange.bind(n),n}return $(t,S),J(t,[{key:"onChange",value:function(e){var n=e.target.value,t=void 0,o=void 0;try{t=JSON.parse(n),o=!0}catch(e){o=!1}this.setState({value:n,isValid:o}),o&&this.props.onChange(t)}},{key:"componentWillReceiveProps",value:function(e){var n=e.value;this.setState({value:JSON.stringify(n,null,2),isValid:!0})}},{key:"render",value:function(e,t){var o=t.value,r={minWidth:300,width:"100%"};return t.isValid||(r.border="1px solid red"),n("iron-autogrow-textarea",{value:o,style:r,"onValue-Changed":this.onChange})}}]),t}(),ee={event:function(e){function t(){I(this,t);var e=q(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.onChange=D.bind(e),e.eventDataChanged=e.eventDataChanged.bind(e),e}return $(t,S),J(t,[{key:"eventDataChanged",value:function(e){this.props.onChange(this.props.index,F({},this.props.trigger,{event_data:e}))}},{key:"render",value:function(e){var t=e.trigger,o=t.event_type,r=t.event_data;return n("div",null,n("paper-input",{label:"Event Type",name:"event_type",value:o,onChange:this.onChange}),"Event Data",n(Z,{value:r,onChange:this.eventDataChanged}))}}]),t}(),state:function(e){function t(){I(this,t);var e=q(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.onChange=D.bind(e),e}return $(t,S),J(t,[{key:"render",value:function(e){var t=e.trigger,o=t.entity_id,r=t.to,i=t.from,a=t.for;return n("div",null,n("paper-input",{label:"Entity Id",name:"entity_id",value:o,onChange:this.onChange}),n("paper-input",{label:"From",name:"from",value:i,onChange:this.onChange}),n("paper-input",{label:"To",name:"to",value:r,onChange:this.onChange}),a&&n("pre",null,"For: ",JSON.stringify(a,null,2)))}}]),t}(),homeassistant:null,mqtt:null,numeric_state:function(e){function t(){I(this,t);var e=q(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.onChange=D.bind(e),e}return $(t,S),J(t,[{key:"render",value:function(e){var t=e.trigger,o=t.value_template,r=t.entity_id,i=t.below,a=t.above;return n("div",null,n("paper-input",{label:"Entity Id",name:"entity_id",value:r,onChange:this.onChange}),n("paper-input",{label:"Above",name:"above",value:a,onChange:this.onChange}),n("paper-input",{label:"Below",name:"below",value:i,onChange:this.onChange}),"Value template (optional)",n("br",null),n("textarea",{name:"value_template",value:o,style:{width:"100%",height:100},onChange:this.onChange}))}}]),t}(),sun:null,template:null,time:null,zone:null},ne=Object.keys(ee).sort(),te=function(e){function t(){I(this,t);var e=q(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.typeChanged=e.typeChanged.bind(e),e.onDelete=e.onDelete.bind(e),e}return $(t,S),J(t,[{key:"typeChanged",value:function(e){var n=e.target.selectedItem.innerHTML;n!==this.props.trigger.platform&&this.props.onChange(this.props.index,{platform:n})}},{key:"onDelete",value:function(){confirm("Sure you want to delete?")&&this.props.onChange(this.props.index,null)}},{key:"render",value:function(e){var t=e.index,o=e.trigger,r=e.onChange,i=ee[o.platform],a=ne.indexOf(o.platform),l=void 0;return l=i?n("div",null,n("paper-dropdown-menu-light",{label:"Trigger Type","no-animations":!0},n("paper-listbox",{slot:"dropdown-content",selected:a,"oniron-select":this.typeChanged},ne.map(function(e){return n("paper-item",null,e)}))),n(i,{index:t,trigger:o,onChange:r})):n("div",null,"Unsupported platform: ",o.platform,n("pre",null,JSON.stringify(o,null,2))),n("paper-card",null,n("div",{class:"card-menu"},n("paper-menu-button",{"no-animations":!0,"horizontal-align":"right","horizontal-offset":"-5","vertical-offset":"-5"},n("paper-icon-button",{icon:"mdi:dots-vertical",slot:"dropdown-trigger"}),n("paper-listbox",{slot:"dropdown-content"},n("paper-item",{disabled:!0},"Duplicate"),n("paper-item",{onTap:this.onDelete},"Delete")))),n("div",{class:"card-content"},l))}}]),t}(),oe=function(e){function t(){I(this,t);var e=q(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.addTrigger=e.addTrigger.bind(e),e.triggerChanged=e.triggerChanged.bind(e),e}return $(t,S),J(t,[{key:"addTrigger",value:function(){var e=this.props.trigger.concat({platform:"event"});this.props.onChange(e)}},{key:"triggerChanged",value:function(e,n){var t=this.props.trigger.concat();null===n?t.splice(e,1):t[e]=n,this.props.onChange(t)}},{key:"render",value:function(e){var t=this;return n("div",{class:"triggers"},e.trigger.map(function(e,o){return n(te,{index:o,trigger:e,onChange:t.triggerChanged})}),n("paper-card",null,n("div",{class:"card-actions add-card"},n("paper-button",{onTap:this.addTrigger},"Add trigger"))))}}]),t}(),re={"Call Service":function(e){function t(){I(this,t);var e=q(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.onChange=e.onChange.bind(e),e.serviceDataChanged=e.serviceDataChanged.bind(e),e}return $(t,S),J(t,[{key:"onChange",value:function(e){this.props.onChange(this.props.index,F({},this.props.action,R({},e.target.name,e.target.value)))}},{key:"serviceDataChanged",value:function(e){this.props.onChange(this.props.index,F({},this.props.action,{data:e}))}},{key:"render",value:function(e){var t=e.action,o=t.alias,r=t.service,i=t.data;return n("div",null,n("paper-input",{label:"Alias",name:"alias",value:o,onChange:this.onChange}),n("paper-input",{label:"Service",name:"service",value:r,onChange:this.onChange}),"Service Data",n("br",null),n(Z,{value:i,onChange:this.serviceDataChanged}))}}]),t}(),Delay:null,"Templated Delay":null,Condition:null,"Fire Event":null},ie=Object.keys(re).sort(),ae=function(e){function t(){I(this,t);var e=q(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.typeChanged=e.typeChanged.bind(e),e.onDelete=e.onDelete.bind(e),e}return $(t,S),J(t,[{key:"typeChanged",value:function(e){var n=e.target.selectedItem.innerHTML;P(this.props.action)!==n&&this.props.onChange(this.props.index,{platform:n})}},{key:"onDelete",value:function(){confirm("Sure you want to delete?")&&this.props.onChange(this.props.index,null)}},{key:"render",value:function(e){var t=e.index,o=e.action,r=e.onChange,i=P(o),a=re[i],l=ie.indexOf(i),s=void 0;return s=a?n("div",null,n("paper-dropdown-menu-light",{label:"Action Type","no-animations":!0},n("paper-listbox",{slot:"dropdown-content",selected:l,"oniron-select":this.typeChanged},ie.map(function(e){return n("paper-item",null,e)}))),n(a,{index:t,action:o,onChange:r})):n("div",null,"Unsupported action",n("pre",null,JSON.stringify(o,null,2))),n("paper-card",null,n("div",{class:"card-menu"},n("paper-menu-button",{"no-animations":!0,"horizontal-align":"right","horizontal-offset":"-5","vertical-offset":"-5"},n("paper-icon-button",{icon:"mdi:dots-vertical",slot:"dropdown-trigger"}),n("paper-listbox",{slot:"dropdown-content"},n("paper-item",{disabled:!0},"Duplicate"),n("paper-item",{onTap:this.onDelete},"Delete")))),n("div",{class:"card-content"},s))}}]),t}(),le=function(e){function t(){I(this,t);var e=q(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.addAction=e.addAction.bind(e),e.actionChanged=e.actionChanged.bind(e),e}return $(t,S),J(t,[{key:"addAction",value:function(){var e=this.props.script.concat({service:""});this.props.onChange(e)}},{key:"actionChanged",value:function(e,n){var t=this.props.script.concat();null===n?t.splice(e,1):t[e]=n,this.props.onChange(t)}},{key:"render",value:function(e){var t=this;return n("div",{class:"script"},e.script.map(function(e,o){return n(ae,{index:o,action:e,onChange:t.actionChanged})}),n("paper-card",null,n("div",{class:"card-actions add-card"},n("paper-button",{onTap:this.addAction},"Add action"))))}}]),t}(),se=function(e){function t(){I(this,t);var e=q(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.onChange=e.onChange.bind(e),e.triggerChanged=e.triggerChanged.bind(e),e.actionChanged=e.actionChanged.bind(e),e}return $(t,S),J(t,[{key:"onChange",value:function(e){this.props.onChange(F({},this.props.automation,R({},e.target.name,e.target.value)))}},{key:"triggerChanged",value:function(e){this.props.onChange(F({},this.props.automation,{trigger:e}))}},{key:"actionChanged",value:function(e){this.props.onChange(F({},this.props.automation,{action:e}))}},{key:"render",value:function(e){var t=e.automation,o=e.isWide,r=t.alias,i=t.trigger,a=t.condition,l=t.action;return n("div",null,n("ha-config-section",{"is-wide":o},n("span",{slot:"header"},r),n("span",{slot:"introduction"},"Use automations to bring your home alive."),n("paper-card",null,n("div",{class:"card-content"},n("paper-input",{label:"Name",name:"alias",value:r,onChange:this.onChange})))),n("ha-config-section",{"is-wide":o},n("span",{slot:"header"},"Triggers"),n("span",{slot:"introduction"},"Triggers are what starts the processing of an automation rule. It is possible to specify multiple triggers for the same rule. Once a trigger starts, Home Assistant will validate the conditions, if any, and call the action.",n("p",null,n("a",{href:"https://home-assistant.io/docs/automation/trigger/",target:"_blank"},"Learn more about triggers."))),n(oe,{trigger:i,onChange:this.triggerChanged})),a&&n("ha-config-section",{"is-wide":o},n("span",{slot:"header"},"Conditions"),n("span",{slot:"introduction"},"Conditions are an optional part of an automation rule and can be used to prevent an action from happening when triggered. Conditions look very similar to triggers but are very different. A trigger will look at events happening in the system while a condition only looks at how the system looks right now. A trigger can observe that a switch is being turned on. A condition can only see if a switch is currently on or off.",n("p",null,n("a",{href:"https://home-assistant.io/docs/scripts/conditions/",target:"_blank"},"Learn more about conditions."))),n("paper-card",null,n("div",{class:"card-content"},"Conditions are not supported yet.",n("pre",null,JSON.stringify(a,null,2))))),n("ha-config-section",{"is-wide":o},n("span",{slot:"header"},"Action"),n("span",{slot:"introduction"},"The actions are what Home Assistant will do when the automation is triggered.",n("p",null,n("a",{href:"https://home-assistant.io/docs/scripts/",target:"_blank"},"Learn more about actions."))),n(le,{script:l,onChange:this.actionChanged})))}}]),t}();window.AutomationEditor=function(e,t,o){return T(n(se,t),e,o)},window.unmountPreact=function(e,n){T(function(){return null},e,n)}}();</script><dom-module id="ha-automation-editor" assetpath="automation/"><template><style include="ha-style">.errors{padding:20px;font-weight:bold;color:var(--google-red-500);}.content{padding-bottom:20px;}paper-card{display:block;}.triggers,
      .script{margin-top:-16px;}.triggers paper-card,
      .script paper-card{margin-top:16px;}.add-card paper-button{display:block;text-align:center;}.card-menu{position:absolute;top:0;right:0;z-index:1;color:var(--primary-text-color);}.card-menu paper-item{cursor:pointer;}span[slot=introduction] a{color:var(--primary-color);}paper-fab{position:fixed;bottom:16px;right:16px;z-index:1;margin-bottom:-80px;transition:margin-bottom .3s;}paper-fab[is-wide]{bottom:24px;right:24px;}paper-fab[dirty]{margin-bottom:0;}</style><app-header-layout has-scrolling-region=""><app-header slot="header" fixed=""><app-toolbar><paper-icon-button icon="mdi:arrow-left" on-tap="backTapped"></paper-icon-button><div main-title="">Automation [[name]]</div></app-toolbar></app-header><div class="content"><template is="dom-if" if="[[errors]]"><div class="errors">[[errors]]</div></template><div id="root"></div><paper-fab is-wide$="[[isWide]]" dirty$="[[dirty]]" icon="mdi:content-save" title="Save" on-tap="saveAutomation"></paper-fab></div></app-header-layout></template></dom-module><script>Polymer({is:"ha-automation-editor",properties:{hass:{type:Object},narrow:{type:Boolean},showMenu:{type:Boolean,value:!1},errors:{type:Object,value:null},dirty:{type:Boolean,value:!1},config:{type:Object,value:null},automation:{type:Object,observer:"automationChanged"},creatingNew:{type:Boolean,observer:"creatingNewChanged"},name:{type:String,computed:"computeName(automation)"},isWide:{type:Boolean,observer:"isWideChanged"}},created:function(){this.configChanged=this.configChanged.bind(this),this._rendered=null},detached:function(){this._rendered&&window.unmountPreact(this._rendered)},configChanged:function(t){null!==this._rendered&&(this.config=t,this.errors=null,this.dirty=!0,this._updateComponent(t))},automationChanged:function(t,i){t&&(this.hass?i&&i.attributes.id===t.attributes.id||this.hass.callApi("get","config/automation/config/"+t.attributes.id).then(function(t){["trigger","condition","action"].forEach(function(i){var e=t[i];e&&!Array.isArray(e)&&(t[i]=[e])}),this.dirty=!1,this.config=t,this._updateComponent()}.bind(this)):setTimeout(this.automationChanged.bind(this,t,i),0))},creatingNewChanged:function(t){t&&(this.dirty=!1,this.config={alias:"New Automation",trigger:[{platform:"state"}],action:[{service:""}]},this._updateComponent())},isWideChanged:function(){null!==this.config&&this._updateComponent()},backTapped:function(){this.dirty&&!confirm("You have unsaved changes. Are you sure you want to leave?")||history.back()},_updateComponent:function(){this._rendered=window.AutomationEditor(this.$.root,{automation:this.config,onChange:this.configChanged,isWide:this.isWide},this._rendered)},saveAutomation:function(){var t=this.creatingNew?""+Date.now():this.automation.attributes.id;this.hass.callApi("post","config/automation/config/"+t,this.config).then(function(){this.dirty=!1,this.creatingNew&&(history.pushState(null,null,"/automation/edit/"+t),this.fire("location-changed"))}.bind(this),function(t){throw this.errors=t.body.message,t}.bind(this))},computeName:function(t){return t&&window.hassUtil.computeStateName(t)}});</script><dom-module id="ha-config-automation" assetpath="automation/"><template><style>ha-automation-picker,
      ha-automation-editor{height:100%;}</style><app-route route="[[route]]" pattern="/edit/:automation" data="{{_routeData}}" active="{{_edittingAddon}}"></app-route><app-route route="[[route]]" pattern="/new" active="{{_creatingNew}}"></app-route><template is="dom-if" if="[[!showEditor]]"><ha-automation-picker narrow="[[narrow]]" show-menu="[[showMenu]]" automations="[[automations]]" is-wide="[[isWide]]"></ha-automation-picker></template><template is="dom-if" if="[[showEditor]]" restamp=""><ha-automation-editor hass="[[hass]]" automation="[[automation]]" is-wide="[[isWide]]" creating-new="[[_creatingNew]]"></ha-automation-editor></template></template></dom-module><script>Polymer({is:"ha-config-automation",properties:{hass:Object,narrow:Boolean,showMenu:Boolean,route:Object,isWide:Boolean,_routeData:Object,_routeMatches:Boolean,_creatingNew:Boolean,_edittingAddon:Boolean,automations:{type:Array,computed:"computeAutomations(hass)"},automation:{type:Object,computed:"computeAutomation(automations, _edittingAddon, _routeData)"},showEditor:{type:Boolean,computed:"computeShowEditor(_edittingAddon, _creatingNew)"}},computeAutomation:function(t,o,e){if(!t||!o)return null;for(var a=0;a<t.length;a++)if(t[a].attributes.id===e.automation)return t[a];return null},computeAutomations:function(t){var o=[];return Object.keys(t.states).forEach(function(e){var a=t.states[e];"automation"===window.hassUtil.computeDomain(a)&&"id"in a.attributes&&o.push(a)}),o.sort(function(t,o){var e=(t.attributes.alias||t.entity_id).toLowerCase(),a=(o.attributes.alias||o.entity_id).toLowerCase();return e<a?-1:e>a?1:0})},computeShowEditor:function(t,o){return o||t}});</script><dom-module id="ha-service-description" assetpath="../../src/components/"><template>[[_getDescription(hass, domain, service)]]</template></dom-module><script>Polymer({is:"ha-service-description",properties:{hass:Object,domain:String,service:String},_getDescription:function(i,r,e){var n=i.config.services[r];if(!n)return"";var s=n[e];return s?s.description:""}});</script><dom-module id="ozw-log" assetpath="zwave/"><template><style include="iron-flex ha-style">.content{margin-top:24px;}paper-card{display:block;margin:0 auto;max-width:600px;}</style><paper-card heading="OZW Log"><div class="help-text"><pre>[[ozwLogs]]</pre></div><div class="card-actions"><paper-button raised="" on-tap="refreshLog">Refresh</paper-button></div></paper-card></template></dom-module><script>Polymer({is:"ozw-log",properties:{hass:{type:Object},ozwLogs:{type:String,value:""}},refreshLog:function(){this.ozwLogs="Loading ozw log...",this.hass.callApi("GET","zwave/ozwlog").then(function(o){this.ozwLogs=o}.bind(this))}});</script><dom-module id="zwave-network" assetpath="zwave/"><template><style include="iron-flex ha-style">.content{margin-top:24px;}paper-card{display:block;margin:0 auto;max-width:600px;}.card-actions.warning ha-call-service-button{color:var(--google-red-500);}.toggle-help-icon{position:absolute;top:6px;right:0;color:var(--primary-color);}ha-service-description{display:block;color:grey;}[hidden]{display:none;}</style><paper-card heading="Z-Wave Network Management"><paper-icon-button class="toggle-help-icon" on-tap="helpTap" icon="mdi:help-circle"></paper-icon-button><div class="card-actions"><ha-call-service-button hass="[[hass]]" domain="zwave" service="add_node_secure">Add Node Secure</ha-call-service-button><ha-service-description hass="[[hass]]" domain="zwave" service="add_node_secure" hidden$="[[!showDescription]]"></ha-service-description><ha-call-service-button hass="[[hass]]" domain="zwave" service="add_node">Add Node</ha-call-service-button><ha-service-description hass="[[hass]]" domain="zwave" service="add_node" hidden$="[[!showDescription]]"></ha-service-description><ha-call-service-button hass="[[hass]]" domain="zwave" service="remove_node">Remove Node</ha-call-service-button><ha-service-description hass="[[hass]]" domain="zwave" service="remove_node" hidden$="[[!showDescription]]"></ha-service-description></div><div class="card-actions warning"><ha-call-service-button hass="[[hass]]" domain="zwave" service="cancel_command">Cancel Command</ha-call-service-button><ha-service-description hass="[[hass]]" domain="zwave" service="cancel_command" hidden$="[[!showDescription]]"></ha-service-description></div><div class="card-actions"><ha-call-service-button hass="[[hass]]" domain="zwave" service="heal_network">Heal Network</ha-call-service-button><ha-call-service-button hass="[[hass]]" domain="zwave" service="start_network">Start Network</ha-call-service-button><ha-service-description hass="[[hass]]" domain="zwave" service="start_network" hidden$="[[!showDescription]]"></ha-service-description><ha-call-service-button hass="[[hass]]" domain="zwave" service="stop_network">Stop Network</ha-call-service-button><ha-service-description hass="[[hass]]" domain="zwave" service="stop_network" hidden$="[[!showDescription]]"></ha-service-description><ha-call-service-button hass="[[hass]]" domain="zwave" service="soft_reset">Soft Reset</ha-call-service-button><ha-service-description hass="[[hass]]" domain="zwave" service="soft_reset" hidden$="[[!showDescription]]"></ha-service-description><ha-call-service-button hass="[[hass]]" domain="zwave" service="test_network">Test Network</ha-call-service-button><ha-service-description hass="[[hass]]" domain="zwave" service="test_network" hidden$="[[!showDescription]]"></ha-service-description></div></paper-card></template></dom-module><script>Polymer({is:"zwave-network",properties:{hass:{type:Object},showDescription:{type:Boolean,value:!1}},helpTap:function(){this.showDescription=!this.showDescription}});</script><dom-module id="zwave-node-information" assetpath="zwave/"><template><style include="iron-flex ha-style">.content{margin-top:24px;}.node-info{margin-left:16px;}paper-card{display:block;margin:0 auto;max-width:600px;}paper-button[toggles][active]{background:lightgray;}</style><div class="content"><paper-card heading="Node Information"><div class="card-actions"><paper-button toggles="" raised="" noink="" active="{{nodeInfoActive}}">Show</paper-button></div><template is="dom-if" if="{{nodeInfoActive}}"><template is="dom-repeat" items="[[selectedNodeAttrs]]" as="state"><div class="node-info"><span>[[state]]</span></div></template></template></paper-card></div></template></dom-module><script>Polymer({is:"zwave-node-information",properties:{nodes:{type:Array,observer:"nodeChanged"},selectedNode:{type:Number,value:-1,observer:"nodeChanged"},selectedNodeAttrs:{type:Array},nodeInfoActive:{type:Boolean}},nodeChanged:function(e){if(this.nodes&&-1!==e){var t=this.nodes[this.selectedNode].attributes,o=[];Object.keys(t).forEach(function(e){o.push(e+": "+t[e])}),this.selectedNodeAttrs=o.sort()}}});</script><dom-module id="zwave-values" assetpath="zwave/"><template><style include="iron-flex ha-style">.content{margin-top:24px;}paper-card{display:block;margin:0 auto;max-width:600px;}.device-picker{@apply (--layout-horizontal);@apply (--layout-center-center);padding-left:24px;padding-right:24px;padding-bottom:24px;}.help-text{padding-left:24px;padding-right:24px;}</style><div class="content"><paper-card heading="Node Values"><div class="device-picker"><paper-dropdown-menu label="Value" class="flex"><paper-listbox slot="dropdown-content" selected="{{selectedValue}}"><template is="dom-repeat" items="[[values]]" as="item"><paper-item>[[computeSelectCaption(item)]]</paper-item></template></paper-listbox></paper-dropdown-menu></div><template is="dom-if" if="[[!computeIsValueSelected(selectedValue)]]"><div class="card-actions"><paper-input float-label="Value Name" type="text" value="{{newValueNameInput}}" placeholder="[[computeGetValueName(selectedValue)]]"></paper-input><ha-call-service-button hass="[[hass]]" domain="zwave" service="rename_value" service-data="[[computeValueNameServiceData(newValueNameInput)]]">Rename Value</ha-call-service-button></div></template></paper-card></div></template></dom-module><script>Polymer({is:"zwave-values",properties:{hass:{type:Object},nodes:{type:Array},values:{type:Array},selectedNode:{type:Number},selectedValue:{type:Number,value:-1}},listeners:{"hass-service-called":"serviceCalled"},serviceCalled:function(e){if(e.detail.success){var t=this;setTimeout(function(){t.refreshValues(t.selectedNode)},5e3)}},computeSelectCaption:function(e){return e.value.label+" (Instance: "+e.value.instance+", Index: "+e.value.index+")"},computeGetValueName:function(e){return this.values[e].value.label},computeIsValueSelected:function(e){return!this.nodes||-1===this.selectedNode||-1===e},refreshValues:function(e){var t=[];this.hass.callApi("GET","zwave/values/"+this.nodes[e].attributes.node_id).then(function(e){Object.keys(e).forEach(function(s){t.push({key:s,value:e[s]})}),this.values=t,this.selectedValueChanged(this.selectedValue)}.bind(this))},computeValueNameServiceData:function(e){return-1===!this.selectedNode||-1===this.selectedValue?-1:{node_id:this.nodes[this.selectedNode].attributes.node_id,value_id:this.values[this.selectedValue].key,name:e}}});</script><dom-module id="zwave-groups" assetpath="zwave/"><template><style include="iron-flex ha-style">.content{margin-top:24px;}paper-card{display:block;margin:0 auto;max-width:600px;}.device-picker{@apply (--layout-horizontal);@apply (--layout-center-center);padding-left:24px;padding-right:24px;padding-bottom:24px;}.help-text{padding-left:24px;padding-right:24px;}</style><div class="content"><paper-card heading="Node group associations"><div class="device-picker"><paper-dropdown-menu label="Node to control" class="flex"><paper-listbox slot="dropdown-content" selected="{{selectedTargetNode}}"><template is="dom-repeat" items="[[nodes]]" as="state"><paper-item>[[computeSelectCaption(state)]]</paper-item></template></paper-listbox></paper-dropdown-menu></div><template is="dom-if" if="[[!computeIsTargetNodeSelected(selectedTargetNode)]]"><div class="device-picker"><paper-dropdown-menu label="Group" class="flex"><paper-listbox slot="dropdown-content" selected="{{selectedGroup}}"><template is="dom-repeat" items="[[groups]]" as="state"><paper-item>[[computeSelectCaptionGroup(state)]]</paper-item></template></paper-listbox></paper-dropdown-menu></div></template><template is="dom-if" if="[[!computeIsGroupSelected(selectedGroup)]]"><div class="help-text"><span>Other Nodes in this group:</span><template is="dom-repeat" items="[[otherGroupNodes]]" as="state"><span>[[state]]</span></template></div><div class="help-text"><span>Max Associations:</span> <span>[[maxAssociations]]</span></div><div class="card-actions"><template is="dom-if" if="[[!noAssociationsLeft]]"><ha-call-service-button hass="[[hass]]" domain="zwave" service="change_association" service-data="[[computeAssocServiceData(selectedGroup, &quot;add&quot;)]]">Add To Group</ha-call-service-button></template><ha-call-service-button hass="[[hass]]" domain="zwave" service="change_association" service-data="[[computeAssocServiceData(selectedGroup, &quot;remove&quot;)]]">Remove From Group</ha-call-service-button></div></template></paper-card></div></template></dom-module><script>Polymer({is:"zwave-groups",properties:{hass:{type:Object},nodes:{type:Array},groups:{type:Array},selectedNode:{type:Number},selectedTargetNode:{type:Number,value:-1},selectedGroup:{type:Number,value:-1,observer:"selectedGroupChanged"},otherGroupNodes:{type:Array,value:-1,computed:"computeOtherGroupNodes(selectedGroup)"},maxAssociations:{type:String,value:"",computed:"computeMaxAssociations(selectedGroup)"},noAssociationsLeft:{type:Boolean,value:!0,computed:"computeAssociationsLeft(selectedGroup)"}},listeners:{"hass-service-called":"serviceCalled"},serviceCalled:function(e){if(e.detail.success){var t=this;setTimeout(function(){t.refreshGroups(t.selectedNode)},5e3)}},computeAssociationsLeft:function(e){return-1===e||this.maxAssociations===this.otherGroupNodes.length},computeMaxAssociations:function(e){if(-1===e)return-1;var t=this.groups[e].value.max_associations;return t||["None"]},computeOtherGroupNodes:function(e){if(-1===e)return-1;var t=Object.values(this.groups[e].value.associations);return t.length?t:["None"]},computeSelectCaption:function(e){return window.hassUtil.computeStateName(e)+" (Node:"+e.attributes.node_id+" "+e.attributes.query_stage+")"},computeSelectCaptionGroup:function(e){return e.key+": "+e.value.label},computeIsTargetNodeSelected:function(e){return!this.nodes||-1===e},computeIsGroupSelected:function(e){return!this.nodes||-1===this.selectedNode||-1===e},computeAssocServiceData:function(e,t){return-1===!this.groups||-1===e||-1===this.selectedNode?-1:{node_id:this.nodes[this.selectedNode].attributes.node_id,association:t,target_node_id:this.nodes[this.selectedTargetNode].attributes.node_id,group:this.groups[e].key}},refreshGroups:function(e){var t=[];this.hass.callApi("GET","zwave/groups/"+this.nodes[e].attributes.node_id).then(function(e){Object.keys(e).forEach(function(s){t.push({key:s,value:e[s]})}),this.groups=t,this.selectedGroupChanged(this.selectedGroup)}.bind(this))},selectedGroupChanged:function(e){-1!==this.selectedGroup&&-1!==e&&(this.maxAssociations=this.groups[e].value.max_associations,this.otherGroupNodes=Object.values(this.groups[e].value.associations))}});</script><dom-module id="zwave-node-config" assetpath="zwave/"><template><style include="iron-flex ha-style">.content{margin-top:24px;}paper-card{display:block;margin:0 auto;max-width:600px;}.device-picker{@apply (--layout-horizontal);@apply (--layout-center-center);padding-left:24px;padding-right:24px;padding-bottom:24px;}.help-text{padding-left:24px;padding-right:24px;}</style><div class="content"><paper-card heading="Node config options"><template is="dom-if" if="[[wakeupNode]]"><div class="card-actions"><paper-input float-label="Wakeup Interval" type="number" value="{{wakeupInput}}" placeholder="[[computeGetWakeupValue(selectedNode)]]"><div suffix="">seconds</div></paper-input><ha-call-service-button hass="[[hass]]" domain="zwave" service="set_wakeup" service-data="[[computeWakeupServiceData(wakeupInput)]]">Set Wakeup</ha-call-service-button></div></template><div class="device-picker"><paper-dropdown-menu label="Config parameter" class="flex"><paper-listbox slot="dropdown-content" selected="{{selectedConfigParameter}}"><template is="dom-repeat" items="[[config]]" as="state"><paper-item>[[computeSelectCaptionConfigParameter(state)]]</paper-item></template></paper-listbox></paper-dropdown-menu></div><template is="dom-if" if="[[isConfigParameterSelected(selectedConfigParameter, 'List')]]"><div class="device-picker"><paper-dropdown-menu label="Config value" class="flex" placeholder="{{loadedConfigValue}}"><paper-listbox slot="dropdown-content" selected="{{selectedConfigValue}}"><template is="dom-repeat" items="[[selectedConfigParameterValues]]" as="state"><paper-item>[[state]]</paper-item></template></paper-listbox></paper-dropdown-menu></div></template><template is="dom-if" if="[[isConfigParameterSelected(selectedConfigParameter, 'Byte Short Int')]]"><div class="card-actions"><paper-input label="{{selectedConfigParameterNumValues}}" type="number" value="{{selectedConfigValue}}" max="{{configParameterMax}}" min="{{configParameterMin}}"></paper-input></div></template><template is="dom-if" if="[[isConfigParameterSelected(selectedConfigParameter, 'Bool Button')]]"><div class="device-picker"><paper-dropdown-menu label="Config value" class="flex" placeholder="{{loadedConfigValue}}"><paper-listbox slot="dropdown-content" selected="{{selectedConfigValue}}"><template is="dom-repeat" items="[[selectedConfigParameterValues]]" as="state"><paper-item>[[state]]</paper-item></template></paper-listbox></paper-dropdown-menu></div></template><div class="help-text"><span>[[configValueHelpText]]</span></div><template is="dom-if" if="[[isConfigParameterSelected(selectedConfigParameter, 'Bool Button Byte Short Int List')]]"><div class="card-actions"><ha-call-service-button hass="[[hass]]" domain="zwave" service="set_config_parameter" service-data="[[computeSetConfigParameterServiceData(selectedConfigValue)]]">Set Config Parameter</ha-call-service-button></div></template></paper-card></div></template></dom-module><script>Polymer({is:"zwave-node-config",properties:{hass:{type:Object},nodes:{type:Array,observer:"nodesChanged"},selectedNode:{type:Number,value:-1,observer:"nodesChanged"},config:{type:Array,value:function(){return[]}},selectedConfigParameter:{type:Number,value:-1,observer:"selectedConfigParameterChanged"},configParameterMax:{type:Number,value:-1},configParameterMin:{type:Number,value:-1},configValueHelpText:{type:String,value:"",computed:"computeConfigValueHelp(selectedConfigParameter)"},selectedConfigParameterType:{type:String,value:""},selectedConfigValue:{type:Number,value:-1,observer:"computeSetConfigParameterServiceData"},selectedConfigParameterValues:{type:Array,value:function(){return[]}},selectedConfigParameterNumValues:{type:String,value:""},loadedConfigValue:{type:Number,value:-1},wakeupInput:{type:Number},wakeupNode:{type:Boolean,value:!1}},listeners:{"hass-service-called":"serviceCalled"},serviceCalled:function(e){if(e.detail.success){var t=this;setTimeout(function(){t.refreshConfig(t.selectedNode)},5e3)}},nodesChanged:function(){this.nodes&&(this.wakeupNode=0===this.nodes[this.selectedNode].attributes.wake_up_interval||this.nodes[this.selectedNode].attributes.wake_up_interval,this.wakeupNode&&(0===this.nodes[this.selectedNode].attributes.wake_up_interval?this.wakeupInput="":this.wakeupInput=this.nodes[this.selectedNode].attributes.wake_up_interval))},computeGetWakeupValue:function(e){return-1!==this.selectedNode&&this.nodes[e].attributes.wake_up_interval?this.nodes[e].attributes.wake_up_interval:"unknown"},computeWakeupServiceData:function(e){return{node_id:this.nodes[this.selectedNode].attributes.node_id,value:e}},computeConfigValueHelp:function(e){if(-1===e)return"";var t=this.config[e].value.help;return t||["No helptext available"]},computeSetConfigParameterServiceData:function(e){if(-1===this.selectedNode||-1===this.selectedConfigParameter)return-1;var t=null;return"Short Byte Int".includes(this.selectedConfigParameterType)&&(t=parseInt(e,10)),"Bool Button".includes(this.selectedConfigParameterType)&&(t=this.selectedConfigParameterValues[e]),"List"===this.selectedConfigParameterType&&(t=this.selectedConfigParameterValues[e]),{node_id:this.nodes[this.selectedNode].attributes.node_id,parameter:this.config[this.selectedConfigParameter].key,value:t}},selectedConfigParameterChanged:function(e){-1!==e&&(this.selectedConfigValue=-1,this.loadedConfigValue=-1,this.selectedConfigParameterValues=[],this.selectedConfigParameterType=this.config[e].value.type,this.configParameterMax=this.config[e].value.max,this.configParameterMin=this.config[e].value.min,this.loadedConfigValue=this.config[e].value.data,this.configValueHelpText=this.config[e].value.help,"Short Byte Int".includes(this.selectedConfigParameterType)&&(this.selectedConfigParameterNumValues=this.config[e].value.data_items,this.selectedConfigValue=this.loadedConfigValue),"Bool Button".includes(this.selectedConfigParameterType)&&(this.selectedConfigParameterValues=["True","False"],this.config[e].value.data?this.loadedConfigValue="True":this.loadedConfigValue="False"),"List".includes(this.selectedConfigParameterType)&&(this.selectedConfigParameterValues=this.config[e].value.data_items))},isConfigParameterSelected:function(e,t){return-1!==e&&(this.config[e].value.type===t||!!t.includes(this.config[e].value.type))},computeSelectCaptionConfigParameter:function(e){return e.key+": "+e.value.label},refreshConfig:function(e){var t=[];this.hass.callApi("GET","zwave/config/"+this.nodes[e].attributes.node_id).then(function(e){Object.keys(e).forEach(function(a){t.push({key:a,value:e[a]})}),this.config=t,this.selectedConfigParameterChanged(this.selectedConfigParameter)}.bind(this))}});</script><dom-module id="zwave-usercodes" assetpath="zwave/"><template><style include="iron-flex ha-style">.content{margin-top:24px;}paper-card{display:block;margin:0 auto;max-width:600px;}.device-picker{@apply (--layout-horizontal);@apply (--layout-center-center);padding-left:24px;padding-right:24px;padding-bottom:24px;}</style><div class="content"><paper-card heading="Node user codes"><div class="device-picker"><paper-dropdown-menu label="Code slot" class="flex"><paper-listbox slot="dropdown-content" selected="{{selectedUserCode}}"><template is="dom-repeat" items="[[userCodes]]" as="state"><paper-item>[[computeSelectCaptionUserCodes(state)]]</paper-item></template></paper-listbox></paper-dropdown-menu></div><template is="dom-if" if="[[isUserCodeSelected(selectedUserCode)]]"><div class="card-actions"><paper-input label="User code" type="number" value="{{selectedUserCodeValue}}" maxlength="{{userCodeMaxLen}}" min="0"></paper-input></div><div class="card-actions"><ha-call-service-button hass="[[hass]]" domain="lock" service="set_usercode" service-data="[[computeUserCodeServiceData(selectedUserCodeValue, &quot;Add&quot;)]]">Set Usercode</ha-call-service-button><ha-call-service-button hass="[[hass]]" domain="lock" service="clear_usercode" service-data="[[computeUserCodeServiceData(selectedUserCode, &quot;Delete&quot;)]]">Delete Usercode</ha-call-service-button></div></template></paper-card></div></template></dom-module><script>Polymer({is:"zwave-usercodes",properties:{hass:{type:Object},nodes:{type:Array},selectedNode:{type:Number},userCodes:{type:Object},userCodeMaxLen:{type:Number,value:4},selectedUserCode:{type:Number,value:-1,observer:"selectedUserCodeChanged"},selectedUserCodeValue:{type:Number,value:-1}},listeners:{"hass-service-called":"serviceCalled"},serviceCalled:function(e){if(e.detail.success){var s=this;setTimeout(function(){s.refreshUserCodes(s.selectedNode)},5e3)}},isUserCodeSelected:function(e){return-1!==e},computeSelectCaptionUserCodes:function(e){return e.key+": "+e.value.label},selectedUserCodeChanged:function(e){if(-1!==this.selectedUserCode&&-1!==e){var s=parseInt(this.userCodes[e].value.code.trim());this.userCodeMaxLen=this.userCodes[e].value.length,isNaN(s)?this.selectedUserCodeValue="":this.selectedUserCodeValue=s}},computeUserCodeServiceData:function(e,s){if(-1===this.selectedNode||!e)return-1;var t=null,d=null;return"Add"===s&&(d=e,t={node_id:this.nodes[this.selectedNode].attributes.node_id,code_slot:this.selectedUserCode,usercode:d}),"Delete"===s&&(t={node_id:this.nodes[this.selectedNode].attributes.node_id,code_slot:this.selectedUserCode}),t},refreshUserCodes:function(e){this.selectedUserCodeValue="";var s=[];this.hass.callApi("GET","zwave/usercodes/"+this.nodes[e].attributes.node_id).then(function(e){Object.keys(e).forEach(function(t){s.push({key:t,value:e[t]})}),this.userCodes=s,this.selectedUserCodeChanged(this.selectedUserCode)}.bind(this))}});</script><dom-module id="ha-entity-config"><template><style include="iron-flex ha-style">paper-card{display:block;}.device-picker{@apply (--layout-horizontal);padding-bottom:24px;}.form-placeholder{@apply (--layout-vertical);@apply (--layout-center-center);height:96px;}[hidden]:{display:none;};.card-actions{@apply (--layout-horizontal);@apply (--layout-justified);}dom-if{display:none;}</style><paper-card><div class="card-content"><div class="device-picker"><paper-dropdown-menu label="[[label]]" class="flex" disabled="[[!entities.length]]"><paper-listbox slot="dropdown-content" selected="{{selectedEntity}}"><template is="dom-repeat" items="[[entities]]" as="state"><paper-item>[[computeSelectCaption(state)]]</paper-item></template></paper-listbox></paper-dropdown-menu></div><div class="form-container"><template is="dom-if" if="[[computeShowPlaceholder(formState)]]"><div class="form-placeholder"><template is="dom-if" if="[[computeShowNoDevices(formState)]]">No entities found! :-(</template><template is="dom-if" if="[[computeShowSpinner(formState)]]"><paper-spinner active="" alt="[[formState]]"></paper-spinner>[[formState]]</template></div></template><div hidden$="[[!computeShowForm(formState)]]" id="form"></div></div></div><div class="card-actions"><paper-button on-tap="saveEntity" disabled="[[computeShowPlaceholder(formState)]]">SAVE</paper-button><template is="dom-if" if="[[allowDelete]]"><paper-button class="warning" on-tap="deleteEntity" disabled="[[computeShowPlaceholder(formState)]]">DELETE</paper-button></template></div></paper-card></template></dom-module><script>Polymer({is:"ha-entity-config",properties:{hass:{type:Object,observer:"hassChanged"},label:{type:String,value:"Device"},entities:{type:Array,observer:"entitiesChanged"},allowDelete:{type:Boolean,value:!1},selectedEntity:{type:Number,value:-1,observer:"entityChanged"},formState:{type:String,value:"no-devices"},config:{type:Object}},attached:function(){this.formEl=document.createElement(this.config.component),this.formEl.hass=this.hass,this.$.form.appendChild(this.formEl),this.entityChanged(this.selectedEntity)},computeSelectCaption:function(t){return this.config.computeSelectCaption?this.config.computeSelectCaption(t):window.hassUtil.computeStateName(t)},computeShowNoDevices:function(t){return"no-devices"===t},computeShowSpinner:function(t){return"loading"===t||"saving"===t},computeShowPlaceholder:function(t){return"editing"!==t},computeShowForm:function(t){return"editing"===t},hassChanged:function(t){this.formEl&&(this.formEl.hass=t)},entitiesChanged:function(t,e){if(0!==t.length)if(e){var i=e[this.selectedEntity].entity_id,n=t.findIndex(function(t){return t.entity_id===i});-1===n?this.selectedEntity=0:n!==this.selectedEntity&&(this.selectedEntity=n)}else this.selectedEntity=0;else this.formState="no-devices"},entityChanged:function(t){if(this.entities&&this.formEl){var e=this.entities[t];if(e){this.formState="loading";var i=this;this.formEl.loadEntity(e).then(function(){i.formState="editing"})}}},saveEntity:function(){this.formState="saving";var t=this;this.formEl.saveEntity().then(function(){t.formState="editing"})}});</script><dom-module id="ha-form-style"><template><style>.form-group{@apply (--layout-horizontal);@apply (--layout-center);padding:8px 16px;}.form-group label{@apply (--layout-flex-2);}.form-group .form-control{@apply (--layout-flex-1);}.form-group.vertical{@apply (--layout-vertical);@apply (--layout-start);}paper-dropdown-menu.form-control{margin:-9px 0;}</style></template></dom-module><dom-module id="ha-form-zwave-device" assetpath="zwave/"><template><style include="iron-flex ha-style ha-form-style"></style><div class="form-group"><paper-checkbox checked="{{entityIgnored}}" class="form-control">Exclude from Home Assistant</paper-checkbox></div><div class="form-group"><paper-dropdown-menu class="form-control flex" label="Polling intensity" disabled="[[entityIgnored]]"><paper-listbox slot="dropdown-content" selected="{{entityPollingIntensity}}"><paper-item>Do not poll (0)</paper-item><paper-item>Poll every time (1)</paper-item><paper-item>Poll every other time (2)</paper-item></paper-listbox></paper-dropdown-menu></div></template></dom-module><script>Polymer({is:"ha-form-zwave-device",properties:{hass:{type:Object},entity:{type:Object},entityIgnored:{type:Boolean},entityPollingIntensity:{type:Number}},loadEntity:function(t){this.entity=t;var i=this;return this.hass.callApi("GET","config/zwave/device_config/"+t.entity_id).then(function(t){i.entityIgnored=t.ignored||!1,i.entityPollingIntensity=t.polling_intensity||0})},saveEntity:function(){var t={ignored:this.entityIgnored,polling_intensity:this.entityPollingIntensity};return this.hass.callApi("POST","config/zwave/device_config/"+this.entity.entity_id,t)}});</script><dom-module id="zwave-node-options" assetpath="zwave/"><template><ha-config-section is-wide="[[isWide]]"><span slot="header">Z-Wave</span> <span slot="introduction">Z-Wave devices contain a lot of options. These controls will allow you to get into the nitty gritty details.</span><ha-entity-config hass="[[hass]]" entities="[[entities]]" config="[[entityConfig]]"></ha-entity-config></ha-config-section></template></dom-module><script>Polymer({is:"zwave-node-options",properties:{hass:{type:Object},isWide:{type:Boolean,value:!1},entities:{type:Array,computed:"computeEntities(hass)"},entityConfig:{type:Object,value:{component:"ha-form-zwave-device",computeSelectCaption:function(t){return window.hassUtil.computeStateName(t)+" ("+window.hassUtil.computeDomain(t)+")"}}}},computeEntities:function(t){return Object.keys(t.states).map(function(e){return t.states[e]}).filter(function(t){return!t.attributes.hidden&&"node_id"in t.attributes}).sort(window.hassUtil.sortByName)}});</script><dom-module id="ha-config-zwave" assetpath="zwave/"><template><style include="iron-flex ha-style">.content{margin-top:24px;}.node-info{margin-left:16px;}.help-text{padding-left:24px;padding-right:24px;}paper-card{display:block;margin:0 auto;max-width:600px;}.device-picker{@apply (--layout-horizontal);@apply (--layout-center-center);padding-left:24px;padding-right:24px;padding-bottom:24px;}ha-service-description{display:block;color:grey;}[hidden]{display:none;}.toggle-help-icon{position:absolute;top:6px;right:0;color:var(--primary-color);}</style><app-header-layout has-scrolling-region=""><app-header slot="header" fixed=""><app-toolbar><paper-icon-button icon="mdi:arrow-left" on-tap="_backTapped"></paper-icon-button><div main-title="">Z-Wave Manager</div></app-toolbar></app-header><zwave-node-options is-wide="[[isWide]]" hass="[[hass]]"></zwave-node-options><div class="content"><zwave-network id="zwave-network" hass="[[hass]]"></zwave-network></div><div class="content"><paper-card heading="Z-Wave Node Management"><paper-icon-button class="toggle-help-icon" on-tap="toggleHelp" icon="mdi:help-circle"></paper-icon-button><div class="device-picker"><paper-dropdown-menu label="Nodes" class="flex"><paper-listbox slot="dropdown-content" selected="{{selectedNode}}"><template is="dom-repeat" items="[[nodes]]" as="state"><paper-item>[[computeSelectCaption(state)]]</paper-item></template></paper-listbox></paper-dropdown-menu></div><template is="dom-if" if="[[!computeIsNodeSelected(selectedNode)]]"><template is="dom-if" if="[[showHelp]]"><div style="color: grey; padding: 12px">Select node to view per-node options</div></template></template><template is="dom-if" if="[[computeIsNodeSelected(selectedNode)]]"><div class="card-actions"><ha-call-service-button hass="[[hass]]" domain="zwave" service="refresh_node" service-data="[[computeNodeServiceData(selectedNode)]]">Refresh Node</ha-call-service-button><ha-service-description hass="[[hass]]" domain="zwave" service="refresh_node" hidden$="[[!showHelp]]"></ha-service-description><ha-call-service-button hass="[[hass]]" domain="zwave" service="remove_failed_node" service-data="[[computeNodeServiceData(selectedNode)]]">Remove Failed Node</ha-call-service-button><ha-service-description hass="[[hass]]" domain="zwave" service="remove_failed_node" hidden$="[[!showHelp]]"></ha-service-description><ha-call-service-button hass="[[hass]]" domain="zwave" service="replace_failed_node" service-data="[[computeNodeServiceData(selectedNode)]]">Replace Failed Node</ha-call-service-button><ha-service-description hass="[[hass]]" domain="zwave" service="replace_failed_node" hidden$="[[!showHelp]]"></ha-service-description><ha-call-service-button hass="[[hass]]" domain="zwave" service="print_node" service-data="[[computeNodeServiceData(selectedNode)]]">Print Node</ha-call-service-button><ha-service-description hass="[[hass]]" domain="zwave" service="print_node" hidden$="[[!showHelp]]"></ha-service-description></div><div class="card-actions"><paper-input float-label="New node name" type="text" value="{{newNodeNameInput}}" placeholder="[[computeGetNodeName(selectedNode)]]"></paper-input><ha-call-service-button hass="[[hass]]" domain="zwave" service="rename_node" service-data="[[computeNodeNameServiceData(newNodeNameInput)]]">Rename Node</ha-call-service-button><ha-service-description hass="[[hass]]" domain="zwave" service="rename_node" hidden$="[[!showHelp]]"></ha-service-description></div><div class="device-picker"><paper-dropdown-menu label="Entities of this node" class="flex"><paper-listbox slot="dropdown-content" selected="{{selectedEntity}}"><template is="dom-repeat" items="[[entities]]" as="state"><paper-item>[[computeSelectCaptionEnt(state)]]</paper-item></template></paper-listbox></paper-dropdown-menu></div><template is="dom-if" if="[[!computeIsEntitySelected(selectedEntity)]]"><div class="card-actions"><ha-call-service-button hass="[[hass]]" domain="zwave" service="refresh_entity" service-data="[[computeRefreshEntityServiceData(selectedEntity)]]">Refresh Entity</ha-call-service-button><ha-service-description hass="[[hass]]" domain="zwave" service="refresh_entity" hidden$="[[!showHelp]]"></ha-service-description></div><div class="content"><div class="card-actions"><paper-button toggles="" raised="" noink="" active="{{entityInfoActive}}">Entity Attributes</paper-button></div><template is="dom-if" if="{{entityInfoActive}}"><template is="dom-repeat" items="[[selectedEntityAttrs]]" as="state"><div class="node-info"><span>[[state]]</span></div></template></template></div></template></template></paper-card></div><template is="dom-if" if="[[computeIsNodeSelected(selectedNode)]]"><zwave-node-information id="zwave-node-information" nodes="[[nodes]]" selected-node="[[selectedNode]]"></zwave-node-information></template><template is="dom-if" if="[[computeIsNodeSelected(selectedNode)]]"><zwave-values hass="[[hass]]" nodes="[[nodes]]" selected-node="[[selectedNode]]" values="[[values]]"></zwave-values></template><template is="dom-if" if="[[computeIsNodeSelected(selectedNode)]]"><zwave-groups hass="[[hass]]" nodes="[[nodes]]" selected-node="[[selectedNode]]" groups="[[groups]]"></zwave-groups></template><template is="dom-if" if="[[computeIsNodeSelected(selectedNode)]]"><zwave-node-config hass="[[hass]]" nodes="[[nodes]]" selected-node="[[selectedNode]]" config="[[config]]"></zwave-node-config></template><template is="dom-if" if="{{hasNodeUserCodes}}"><zwave-usercodes id="zwave-usercodes" hass="[[hass]]" nodes="[[nodes]]" user-codes="[[userCodes]]" selected-node="[[selectedNode]]"></zwave-usercodes></template><div class="content"><ozw-log id="ozw-log" hass="[[hass]]"></ozw-log></div></app-header-layout></template></dom-module><script>Polymer({is:"ha-config-zwave",properties:{hass:Object,isWide:Boolean,nodes:{type:Array,computed:"computeNodes(hass)"},selectedNode:{type:Number,value:-1,observer:"selectedNodeChanged"},config:{type:Array,value:function(){return[]}},entities:{type:Array,computed:"computeEntities(selectedNode)"},entityInfoActive:{type:Boolean},selectedEntity:{type:Number,value:-1,observers:["computeIsEntitySelected","computeRefreshEntityServiceData"]},selectedEntityAttrs:{type:Array,computed:"computeSelectedEntityAttrs(selectedEntity)"},values:{type:Array},groups:{type:Array},newNodeNameInput:{type:String},userCodes:{type:Array,value:function(){return[]}},hasNodeUserCodes:{type:Boolean,value:!1},showHelp:{type:Boolean,value:!1}},computeNodes:function(e){return Object.keys(e.states).map(function(t){return e.states[t]}).filter(function(e){return!e.attributes.hidden&&e.entity_id.match("zwave[.]")}).sort(window.hassUtil.sortByName)},computeEntities:function(e){if(!this.nodes||-1===e)return-1;var t=this.hass,s=this.nodes[this.selectedNode].attributes.node_id;return Object.keys(t.states).map(function(e){return t.states[e]}).filter(function(e){return void 0!==e.attributes.node_id&&(!e.attributes.hidden&&"node_id"in e.attributes&&e.attributes.node_id===s&&!e.entity_id.match("zwave[.]"))}).sort(window.hassUtil.sortByName)},selectedNodeChanged:function(e){this.newNodeNameInput="",-1!==e&&(this.selectedConfigParameter=-1,this.selectedConfigParameterValue=-1,this.selectedGroup=-1,this.hass.callApi("GET","zwave/config/"+this.nodes[e].attributes.node_id).then(function(e){this.config=this._objToArray(e)}.bind(this)),this.hass.callApi("GET","zwave/values/"+this.nodes[e].attributes.node_id).then(function(e){this.values=this._objToArray(e)}.bind(this)),this.hass.callApi("GET","zwave/groups/"+this.nodes[e].attributes.node_id).then(function(e){this.groups=this._objToArray(e)}.bind(this)),this.hasNodeUserCodes=!1,this.notifyPath("hasNodeUserCodes"),this.hass.callApi("GET","zwave/usercodes/"+this.nodes[e].attributes.node_id).then(function(e){this.userCodes=this._objToArray(e),this.hasNodeUserCodes=this.userCodes.length>0,this.notifyPath("hasNodeUserCodes")}.bind(this)))},computeSelectedEntityAttrs:function(e){if(-1===e)return"No entity selected";var t=this.entities[e].attributes,s=[];return Object.keys(t).forEach(function(e){s.push(e+": "+t[e])}),s.sort()},computeSelectCaption:function(e){return window.hassUtil.computeStateName(e)+" (Node:"+e.attributes.node_id+" "+e.attributes.query_stage+")"},computeSelectCaptionEnt:function(e){return window.hassUtil.computeDomain(e)+"."+window.hassUtil.computeStateName(e)},computeIsNodeSelected:function(){return this.nodes&&-1!==this.selectedNode},computeIsEntitySelected:function(e){return-1===e},computeNodeServiceData:function(e){return{node_id:this.nodes[e].attributes.node_id}},computeGetNodeName:function(e){return-1!==this.selectedNode&&this.nodes[e].entity_id?this.nodes[e].attributes.node_name:-1},computeNodeNameServiceData:function(e){return{node_id:this.nodes[this.selectedNode].attributes.node_id,name:e}},computeRefreshEntityServiceData:function(e){return-1===e?-1:{entity_id:this.entities[e].entity_id}},toggleHelp:function(){this.showHelp=!this.showHelp},_objToArray:function(e){var t=[];return Object.keys(e).forEach(function(s){t.push({key:s,value:e[s]})}),t},_backTapped:function(){history.back()}});</script></div><dom-module id="ha-panel-config"><template><style>iron-pages{height:100%;}</style><app-route route="[[route]]" pattern="/:page" data="{{_routeData}}" tail="{{_routeTail}}"></app-route><iron-media-query query="(min-width: 1040px)" query-matches="{{wide}}"></iron-media-query><iron-media-query query="(min-width: 1296px)" query-matches="{{wideSidebar}}"></iron-media-query><iron-pages selected="[[_routeData.page]]" attr-for-selected="page-name" fallback-selection="not-found" selected-attribute="visible"><ha-config-dashboard page-name="dashboard" hass="[[hass]]" is-wide="[[isWide]]"></ha-config-dashboard><ha-config-automation page-name="automation" route="[[_routeTail]]" hass="[[hass]]" is-wide="[[isWide]]"></ha-config-automation><ha-config-zwave page-name="zwave" hass="[[hass]]" is-wide="[[isWide]]"></ha-config-zwave><ha-config-core page-name="core" hass="[[hass]]" is-wide="[[isWide]]"></ha-config-core><hass-error-screen page-name="not-found" error="Page not found." title="Configuration"></hass-error-screen></iron-pages></template></dom-module><script>Polymer({is:"ha-panel-config",properties:{hass:Object,narrow:Boolean,showMenu:Boolean,route:{type:Object,observer:"_routeChanged"},_routeData:Object,_routeTail:Object,wide:Boolean,wideSidebar:Boolean,isWide:{type:Boolean,computed:"computeIsWide(showMenu, wideSidebar, wide)"}},computeIsWide:function(e,o,t){return e?o:t},_routeChanged:function(e){""===e.path&&"/config"===e.prefix&&(history.replaceState(null,null,"/config/dashboard"),this.fire("location-changed"))}});</script></body></html>